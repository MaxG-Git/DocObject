var Doc;(()=>{"use strict";var t={360:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=n(391);e.default=class{constructor(t){return this.obj=t,new Proxy(this,{get:(t,e)=>this.Gen(e)})}Gen(t){return(e=[],n)=>{if(this.obj&&t in this.obj.binds){const r=this.obj.binds[t](this.obj.values,n,i.DocObject.toNodeArray(e),this.obj.values);return"function"==typeof r?r(this.obj.g):r}let r=document.createElement(t);for(let t in n)if("style"===t&&"object"==typeof n[t])for(let e in n[t])r.style[e]=n[t][e];else t in Object.getPrototypeOf(r)?r[t]=n[t]:r.setAttribute(t,n[t]);return i.DocObject.toNodeArray(e).forEach((t=>{r.appendChild(t)})),r}}}},391:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DocObject=e.DocObjectElement=void 0;const c=s(n(360)),a=o(n(382));class u extends HTMLElement{constructor(){super()}}e.DocObjectElement=u;class d{constructor(t,e){this._this=this,this.querySelectorAll=t=>this.root.querySelectorAll(t);const{elements:n,values:i,render:r,binds:o,bindAttr:s,bindInAttr:u,isJQuery:l,connections:h,removeOnload:f}=d.defaultParams(e);let b=d.toNodeArray(t)[0];b instanceof HTMLElement?this.root=b:(0,a.default)(a.ROOT_ERROR,!0),this._connections=h,l&&window.jQuery?(this._isJQuery=!0,this._querySelect=(...t)=>$(this.root).find(...t)):(l&&(0,a.default)(a.JQUERY_NOT_DETECTED,!1),this._isJQuery=!1,this._querySelect=(...t)=>this.root.querySelectorAll(...t)),this.root._DocObject=this,this.root.setAttribute("doc-object",""),this.render=r,this.g=new c.default(this),this.attrs=d.extractAttributes(this.root),this.binds="function"==typeof o?o(this.g):o,this.bindAttr=s,this.bindInAttr=u,this.query=new Proxy({},{get:(t,e)=>{if("string"==typeof e)return t[e]?t[e]:t=>this._querySelect(/.*(\.|\#|\[|\]).*/gm.exec(e)?e:"#"+e)},set:(t,e,n,i)=>("string"==typeof n&&(n=()=>this._querySelect(n)),"string"==typeof e&&(t[e]=t=>n),!0)}),this.elements=new Proxy(this.query,{get:(t,e)=>t[e]()}),n&&Object.entries(n).forEach((t=>{this.query[t[0]]=t[1]})),this._values=new Proxy(i&&"object"==typeof i?i:{},{set:(t,e,n,i)=>(t[e]=n,this.runRender({[e]:n}),this.runConnections({[e]:n}),!0),get:(t,e)=>"function"==typeof t[e]?t[e](this.attrs):t[e]}),this.onLoad=()=>{this.runRender(Object.assign(Object.assign({},this.values),{[!0]:!0})),this.runConnections(this.values)},f||(this._isJQuery?$(this.onLoad):window.onload=this.onLoad)}static toNodeArray(t){return"string"==typeof t||"number"==typeof t?[...d.parser.parseFromString(t.toString(),"text/html").body.childNodes]:NodeList.prototype.isPrototypeOf(t)||window.jQuery&&t instanceof jQuery?[...t]:Array.isArray(t)?t.filter((t=>"string"==typeof t||t instanceof Node)).map((t=>"string"==typeof t?d.toNodeArray(t)[0]:t)):t instanceof Node||t instanceof Document?[t]:[]}static defaultParams({render:t=[],binds:e={},elements:n={},values:i={},bindAttr:r="d-bind",bindInAttr:o="d-bind-in",isJQuery:s=!1,connections:c=[],removeOnload:a=!1}={}){return{elements:n,values:i,render:t,binds:e,bindAttr:r,bindInAttr:o,isJQuery:s,connections:c,removeOnload:a}}static extractAttributes(t){return[...t.attributes].reduce(((t,e)=>Object.assign(Object.assign({},t),{[e.name.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))]:e.value})),{})}defaultRunBindOptions({root:t,valueChanges:e,additionalHosts:n=[],memoizedElements:i=[]}){return{root:t,valueChanges:e,additionalHosts:n,memoizedElements:i}}set values(t){throw Error("Tried to set DocObject.value. Try creating a inner object instead.")}get values(){return this._values}isBindIn(t){return t.getAttribute(this.bindInAttr)&&!0}isBind(t){return("d-bind"===t.localName||t.getAttribute(this.bindAttr))&&!0}static isDobObjectElement(t){return t._DocObject instanceof d}findOrRegisterBind(t){if(void 0===t._DocObjectConfig){let e=this._isJQuery?$([...t.childNodes]):[...t.childNodes];e.toString=()=>t.innerHTML,t._DocObjectConfig={originalChildren:e,originalChildrenHTML:t.innerHTML,originalAttributes:d.extractAttributes(t)}}return t._DocObjectConfig}generateBind(t,e,n){const i=t._DocObjectConfig,r=d.toNodeArray("function"==typeof n?n.bind(this._this)(this.g):n);if(this.isBind(t)){const t=r.find((t=>t instanceof HTMLElement));return t._DocObjectConfig=i,t.setAttribute("d-bind"===t.localName?"to":this.bindAttr,e),Object.entries(i.originalAttributes).filter((t=>!["d-bind-in","to"].includes(t[0]))).forEach((e=>t.setAttribute(e[0],e[1]))),t}return r}runRender(t={}){this.render.filter((e=>e.dep&&Array.isArray(e.dep)&&e.dep.some((e=>e in t))||void 0===e.dep)).forEach((e=>{e.clean&&e.clean(Object.assign(Object.assign({},this.values),t),this.values),e.action(Object.assign(Object.assign({},this.values),t),this.values)})),this.runBinds({root:this.root,valueChanges:t,additionalHosts:[this.root],memoizedElements:[]})}getBindAction(t,e){if(this.isBind(t)){if(t.getAttribute(this.bindAttr))return[t.getAttribute(this.bindAttr),e=>t.parentNode.replaceChild(e,t)];if("d-bind"===t.localName)return[t.getAttribute("to"),e=>t.parentNode.replaceChild(e,t)]}else{if(this.isBindIn(t))return[t.getAttribute(this.bindInAttr),e=>{t.innerHTML="";for(let n of e)t.appendChild(n)}];if(d.isDobObjectElement(t))return t===this.root?["this",e=>{t.innerHTML="";for(let n of e)t.appendChild(n)}]:(t._DocObject.runRender(e),null)}}runBinds(t){const{root:e,valueChanges:n,additionalHosts:i,memoizedElements:r}=this.defaultRunBindOptions(t);return(Array.isArray(e)?e:[e]).filter((t=>t&&t instanceof HTMLElement)).forEach((t=>{[...t.querySelectorAll(`[${this.bindAttr}], [${this.bindInAttr}], d-bind[to], [doc-object]`),...i].forEach((t=>{if(r.some((e=>t.isSameNode(e))))return;r.push(t);const e=this.getBindAction(t,n);if(e){const[i,o]=e;if(i in this.binds){const e=this.findOrRegisterBind(t);o(this.runBinds({root:this.generateBind(t,i,this.binds[i].bind(this._this)(this.values,e.originalAttributes,e.originalChildren,n)),valueChanges:n,memoizedElements:r}))}}}))})),e}runConnections(t={[!0]:!0}){for(let e in t)this._connections.forEach((n=>n.values[e]=t[e]))}connect(...t){return this._connections=[...this._connections,...t],this.runConnections(this.values),this}}e.DocObject=d,d.parser=new DOMParser},382:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JQUERY_NOT_DETECTED=e.ROOT_ERROR=void 0,e.ROOT_ERROR="ROOT_ERROR",e.JQUERY_NOT_DETECTED="JQUERY_NOT_DETECTED",e.default=function(t,e=!1){if(t in n){if(e)throw Error("DocObject: "+n[t].message);console.error(n[t].message)}};const n={ROOT_ERROR:{message:"Root Element Must be a valid Node, Or jQuery Element"},JQUERY_NOT_DETECTED:{message:"JQuery is not detected. Please load JQuery before DocObject"}}},294:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.gen=e.obj=e.fixInput=void 0;const r=n(391),o=i(n(360)),s=n(605);class c extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});const t=document.createElement("div");t.style.display="none",this.shadowRoot.append(t)}}e.fixInput=function(t,e){let n=(0,s.getCursorPos)(t()[0]);e(),(0,s.setCursorPos)(t()[0],n)},window.customElements.define("d-bind",c),window.customElements.define("doc-object",r.DocObjectElement),window.jQuery&&jQuery.fn.extend({DocObject:function(t=null){return this[0]._DocObject&&!t||(this.each((function(){new r.DocObject(this,t)})),new r.DocObject(this,Object.assign({isJQuery:!0},t))),this[0]._DocObject}}),e.obj=function(t,e){return new r.DocObject(t,e)},e.gen=function(){return new o.default}},605:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setCursorPos=e.getCursorPos=void 0,e.getCursorPos=function(t){return"backward"==t.selectionDirection?t.selectionStart:t.selectionEnd},e.setCursorPos=function(t,e){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}}}},e={},n=function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}(294);Doc=n})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVFtSixrQkFDWm5KLEVBQVFvSixRQUNScEosRUFBUW1KLGtCQUFrQlgsRUFBS0EsUUFHeEIsR0FBS3hJLEVBQWdCcUosZ0JBQWlCLENBQzNDLElBQUlDLEVBQVN0SixFQUFnQnFKLGtCQUM3QkMsRUFBTUMsVUFBUyxHQUNmRCxFQUFNRSxRQUFRLFlBQWFoQixHQUMzQmMsRUFBTUcsVUFBVSxZQUFhakIsR0FDN0JjLEVBQU1JLGFDM0JSQyxFQUEyQixHQ0UzQkMsRURDSixTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUosRUFBeUJHLEdBQzVDLFFBQXFCdkUsSUFBakJ3RSxFQUNILE9BQU9BLEVBQWFDLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRyxHQUFZLENBR2pERSxRQUFTLElBT1YsT0FIQUUsRUFBb0JKLEdBQVVLLEtBQUtGLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNILEdBR3BFSSxFQUFPRCxRQ2xCV0gsQ0FBb0IsSyIsInNvdXJjZXMiOlsid2VicGFjazovL0RvYy8uL3NyYy90cy9kb2NnZW4udHMiLCJ3ZWJwYWNrOi8vRG9jLy4vc3JjL3RzL2RvY29iamVjdC50cyIsIndlYnBhY2s6Ly9Eb2MvLi9zcmMvdHMvZXJyb3JzLnRzIiwid2VicGFjazovL0RvYy8uL3NyYy90cy9pbmRleC50cyIsIndlYnBhY2s6Ly9Eb2MvLi9zcmMvdHMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vRG9jL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0RvYy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtEb2NPYmplY3QsIERvY09iamVjdEhUTUxMaWtlfSBmcm9tICcuL2RvY29iamVjdCdcclxuaW1wb3J0IHsgRG9jT2JqZWN0QmluZEF0dHJpYnV0ZSB9IGZyb20gJy4vZG9jYmluZCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERvY0dlbiB7XHJcbiAgICBcclxuICAgIG9iaiA/IDogRG9jT2JqZWN0IFxyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcihvYmo/IDogRG9jT2JqZWN0KXtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLm9iaiA9IG9ialxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHRoaXMsIHtcclxuICAgICAgICAgICAgZ2V0Oih0YXJnZXQsIHByb3AgKSA9PiB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkdlbihwcm9wIGFzIHN0cmluZylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgR2VuKHByb3AgOiBzdHJpbmcpe1xyXG4gICAgICAgIHJldHVybiAoaW5uZXIgOiBEb2NPYmplY3RIVE1MTGlrZSB8IEFycmF5PHN0cmluZ3xOb2RlPiA9IFtdICwgYXR0cnMgOiBEb2NPYmplY3RCaW5kQXR0cmlidXRlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMub2JqICYmIHByb3AgaW4gdGhpcy5vYmouYmluZHMpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYm91bmQgPSB0aGlzLm9iai5iaW5kc1twcm9wXSh0aGlzLm9iai52YWx1ZXMsIGF0dHJzLCBEb2NPYmplY3QudG9Ob2RlQXJyYXkoaW5uZXIpLCB0aGlzLm9iai52YWx1ZXMpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIGJvdW5kID09PSAnZnVuY3Rpb24nID8gYm91bmQodGhpcy5vYmouZykgOiBib3VuZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQocHJvcClcclxuICAgICAgICAgICAgZm9yKGxldCBrZXkgaW4gYXR0cnMpe1xyXG4gICAgICAgICAgICAgICAgaWYoa2V5ID09PSAnc3R5bGUnICYmIHR5cGVvZiBhdHRyc1trZXldID09PSAnb2JqZWN0JyApe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgc2tleSBpbiBhdHRyc1trZXkgYXMgc3RyaW5nXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbc2tleV0gPSBhdHRyc1trZXldW3NrZXldXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKGtleSBpbiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZWxlbWVudCkpe1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRba2V5XSA9IGF0dHJzW2tleV1cclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBEb2NPYmplY3QudG9Ob2RlQXJyYXkoaW5uZXIpLmZvckVhY2goaW5lID0+IHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5lKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGN1cnJ5KGYpIHtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24oYSkge1xyXG4gICAgICAgIFxyXG4gICAgICByZXR1cm4gZnVuY3Rpb24oYikge1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmKGEsIGIpO1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgfSIsImltcG9ydCB7IERvY09iamVjdERvbUJpbmQsIERvY09iamVjdEJpbmQsIERvY09iamVjdEJpbmRHZW4sIERvY09iamVjdEJpbmRBdHRyaWJ1dGUgfSBmcm9tICcuL2RvY2JpbmQnXHJcbmltcG9ydCB7IERvY09iamVjdFJlbmRlciB9IGZyb20gJy4vZG9jcmVuZGVyJ1xyXG5pbXBvcnQgIERvY0dlbiAgZnJvbSAnLi9kb2NnZW4nXHJcbmltcG9ydCBydW5FcnJvciwgeyBcclxuICAgIFJPT1RfRVJST1IsXHJcbiAgICBKUVVFUllfTk9UX0RFVEVDVEVEXHJcbn0gZnJvbSAnLi9lcnJvcnMnO1xyXG5cclxuLyoqKioqKiogR0xPQkFMUyAqKioqKioqL1xyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgICBpbnRlcmZhY2UgV2luZG93IHtcclxuICAgICAgICBqUXVlcnk6YW55O1xyXG4gICAgICAgIG1zQ3J5cHRvOmFueTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8qKioqKioqIERPQyBPQkpFQ1QgKioqKioqKi9cclxuZXhwb3J0IHR5cGUgRG9jT2JqZWN0SFRNTExpa2UgPSBcclxufCBOb2RlXHJcbnwgTm9kZUxpc3RcclxufCBKUXVlcnkgXHJcbnwgTnVtYmVyXHJcbnwgc3RyaW5nXHJcbnwgKChnZW46IERvY0dlbikgPT4gRG9jT2JqZWN0SFRNTExpa2UpO1xyXG5cclxuXHJcblxyXG5pbnRlcmZhY2UgRG9jT2JqZWN0T3B0aW9ucyB7XHJcbiAgICByZW5kZXIgOiBEb2NPYmplY3RSZW5kZXI7XHJcbiAgICBiaW5kcyA6IERvY09iamVjdEJpbmQgfCBEb2NPYmplY3RCaW5kR2VuO1xyXG4gICAgZWxlbWVudHMgOiB7W2tleTpzdHJpbmddOiBzdHJpbmd9O1xyXG4gICAgdmFsdWVzIDogb2JqZWN0O1xyXG4gICAgYmluZEF0dHIgOiBzdHJpbmc7XHJcbiAgICBiaW5kSW5BdHRyIDogc3RyaW5nO1xyXG4gICAgaXNKUXVlcnkgOiBib29sZWFuO1xyXG4gICAgY29ubmVjdGlvbnMgOiBBcnJheTxEb2NPYmplY3Q+XHJcbiAgICByZW1vdmVPbmxvYWQgOiBib29sZWFuXHJcbn1cclxuXHJcbmludGVyZmFjZSBEb2NPYmplY3RSdW5CaW5kT3B0aW9ucyB7XHJcbiAgICByb290IDogYW55O1xyXG4gICAgdmFsdWVDaGFuZ2VzOiBvYmplY3Q7XHJcbiAgICBhZGRpdGlvbmFsSG9zdHM/IDogQXJyYXk8SFRNTEVsZW1lbnQ+XHJcbiAgICBtZW1vaXplZEVsZW1lbnRzIDogIEFycmF5PERvY09iamVjdEVsZW1lbnR8RG9jT2JqZWN0RG9tQmluZD5cclxufVxyXG5cclxuLy8gZXhwb3J0IGludGVyZmFjZSBEb2NPYmplY3RFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4vLyAgICAgX0RvY09iamVjdD8gOiBEb2NPYmplY3RcclxuLy8gfVxyXG5cclxuZXhwb3J0IGNsYXNzIERvY09iamVjdEVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICBfRG9jT2JqZWN0PyA6IERvY09iamVjdFxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgfVxyXG59XHJcblxyXG5pbnRlcmZhY2UgRG9jT2JqZWN0RWxlbWVudHMge1xyXG4gICAgW2tleTogc3RyaW5nXSA6IHN0cmluZyB8ICgoc2VsZWN0b3IgOiBzdHJpbmcgKSA9PiBOb2RlTGlzdHxKUXVlcnkpXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRG9jT2JqZWN0Q29uZmlnIHtcclxuICAgIG9yaWdpbmFsQ2hpbGRyZW46IEFycmF5PE5vZGU+IHwgSlF1ZXJ5PENoaWxkTm9kZVtdPjtcclxuICAgIG9yaWdpbmFsQ2hpbGRyZW5IVE1MOiBzdHJpbmc7XHJcbiAgICBvcmlnaW5hbEF0dHJpYnV0ZXM6IHtba2V5OnN0cmluZ10gOiBzdHJpbmd9O1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIERvY09iamVjdCB7XHJcblxyXG4gICAgc3RhdGljIHBhcnNlciA6IERPTVBhcnNlciA9IG5ldyBET01QYXJzZXIoKVxyXG5cclxuICAgIHN0YXRpYyB0b05vZGVBcnJheShhbnkgOiBEb2NPYmplY3RIVE1MTGlrZSB8IEFycmF5PHN0cmluZ3xOb2RlPiApIDogQXJyYXk8Tm9kZT4ge1xyXG4gICAgICAgIGlmKHR5cGVvZiBhbnkgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBhbnkgPT09ICdudW1iZXInKXtcclxuICAgICAgICAgICAgcmV0dXJuIFsuLi5Eb2NPYmplY3QucGFyc2VyLnBhcnNlRnJvbVN0cmluZyhhbnkudG9TdHJpbmcoKSwgJ3RleHQvaHRtbCcpLmJvZHkuY2hpbGROb2Rlc11cclxuICAgICAgICB9ZWxzZSBpZihOb2RlTGlzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihhbnkpIHx8ICh3aW5kb3cualF1ZXJ5ICYmIGFueSBpbnN0YW5jZW9mIGpRdWVyeSkpe1xyXG4gICAgICAgICAgICByZXR1cm4gWyAuLi4oYW55IGFzIE5vZGVMaXN0KV1cclxuICAgICAgICB9ZWxzZSBpZihBcnJheS5pc0FycmF5KGFueSkpe1xyXG4gICAgICAgICAgICByZXR1cm4gYW55XHJcbiAgICAgICAgICAgIC5maWx0ZXIoZT0+ICh0eXBlb2YgZSA9PT0gJ3N0cmluZycpIHx8IGUgaW5zdGFuY2VvZiBOb2RlIClcclxuICAgICAgICAgICAgLm1hcChlPT4gKHR5cGVvZiBlID09PSAnc3RyaW5nJykgPyBEb2NPYmplY3QudG9Ob2RlQXJyYXkoZSlbMF0gOiBlICk7XHJcbiAgICAgICAgfSBlbHNlIGlmKGFueSBpbnN0YW5jZW9mIE5vZGUgfHwgYW55IGluc3RhbmNlb2YgRG9jdW1lbnQgKXtcclxuICAgICAgICAgICAgcmV0dXJuIFthbnldXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBbXVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGVmYXVsdFBhcmFtcyh7XHJcbiAgICAgICAgcmVuZGVyID0gW10sXHJcbiAgICAgICAgYmluZHMgPSB7fSxcclxuICAgICAgICBlbGVtZW50cyA9IHt9LFxyXG4gICAgICAgIHZhbHVlcyA9IHt9LFxyXG4gICAgICAgIGJpbmRBdHRyID0gJ2QtYmluZCcsXHJcbiAgICAgICAgYmluZEluQXR0ciA9ICdkLWJpbmQtaW4nLFxyXG4gICAgICAgIGlzSlF1ZXJ5ID0gZmFsc2UsXHJcbiAgICAgICAgY29ubmVjdGlvbnMgPSBbXSxcclxuICAgICAgICByZW1vdmVPbmxvYWQgPSBmYWxzZVxyXG4gICAgfSA9IHt9KSA6IERvY09iamVjdE9wdGlvbnMge1xyXG4gICAgICAgIHJldHVybiAgeyBlbGVtZW50cywgdmFsdWVzLCByZW5kZXIsIGJpbmRzLCBiaW5kQXR0ciwgYmluZEluQXR0ciwgaXNKUXVlcnksIGNvbm5lY3Rpb25zLCByZW1vdmVPbmxvYWQgfSBcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZXh0cmFjdEF0dHJpYnV0ZXMoZWxlbWVudCA6IERvY09iamVjdERvbUJpbmQpe1xyXG4gICAgICAgIHJldHVybiBbLi4uZWxlbWVudC5hdHRyaWJ1dGVzXS5yZWR1Y2UoIChhLGMpPT57cmV0dXJuIHsuLi5hLCBbKGMubmFtZSkucmVwbGFjZSgvLShbYS16XSkvZywgZnVuY3Rpb24gKGcpIHsgcmV0dXJuIGdbMV0udG9VcHBlckNhc2UoKTsgfSldOmMudmFsdWV9IH0sIHt9IClcclxuICAgIH1cclxuICAgIFxyXG4gICAgZGVmYXVsdFJ1bkJpbmRPcHRpb25zKHtcclxuICAgICAgICByb290LFxyXG4gICAgICAgIHZhbHVlQ2hhbmdlcyxcclxuICAgICAgICBhZGRpdGlvbmFsSG9zdHMgPSBbXSxcclxuICAgICAgICBtZW1vaXplZEVsZW1lbnRzID0gW11cclxuICAgIH0gOiBEb2NPYmplY3RSdW5CaW5kT3B0aW9ucyApIDogRG9jT2JqZWN0UnVuQmluZE9wdGlvbnMge1xyXG4gICAgICAgIHJldHVybiB7cm9vdCwgdmFsdWVDaGFuZ2VzLCBhZGRpdGlvbmFsSG9zdHMsIG1lbW9pemVkRWxlbWVudHN9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgcmVhZG9ubHkgX3ZhbHVlcyA6IG9iamVjdDtcclxuICAgIGVsZW1lbnRzIDogUHJveHlIYW5kbGVyPERvY09iamVjdEVsZW1lbnRzPjtcclxuICAgIHJvb3QgOiBEb2NPYmplY3RFbGVtZW50O1xyXG4gICAgcmVuZGVyIDogRG9jT2JqZWN0UmVuZGVyO1xyXG4gICAgYmluZHMgOiBEb2NPYmplY3RCaW5kO1xyXG4gICAgYmluZEF0dHIgOiBzdHJpbmc7XHJcbiAgICBiaW5kSW5BdHRyIDogc3RyaW5nO1xyXG4gICAgcXVlcnkgOiBQcm94eUhhbmRsZXI8RG9jT2JqZWN0RWxlbWVudHM+O1xyXG4gICAgX3F1ZXJ5U2VsZWN0IDogKHNlbGVjdG9yOnN0cmluZyk9PiBOb2RlTGlzdCB8IEpRdWVyeTtcclxuICAgIF9pc0pRdWVyeSA6IGJvb2xlYW5cclxuICAgIF9jb25uZWN0aW9ucyA6IEFycmF5PERvY09iamVjdD5cclxuICAgIGF0dHJzIDogRG9jT2JqZWN0QmluZEF0dHJpYnV0ZVxyXG4gICAgZyA6IERvY0dlblxyXG4gICAgX3RoaXMgOiBhbnkgPSB0aGlzO1xyXG4gICAgb25Mb2FkOiAoKT0+dm9pZFxyXG5cclxuICAgIHNldCB2YWx1ZXModmFsdWVzKSB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJUcmllZCB0byBzZXQgRG9jT2JqZWN0LnZhbHVlLiBUcnkgY3JlYXRpbmcgYSBpbm5lciBvYmplY3QgaW5zdGVhZC5cIilcclxuICAgIH1cclxuICAgIGdldCB2YWx1ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlcztcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3Rvcihyb290IDogRG9jT2JqZWN0RWxlbWVudCB8IEpRdWVyeSB8IHN0cmluZywgb3B0aW9ucyA6IG9iamVjdCkge1xyXG4gICAgICAgIC8vQWRkIERlZmF1bHQgUGFyYW1ldGVycyB0byBvcHRpb25zXHJcbiAgICAgICAgY29uc3QgeyBlbGVtZW50cywgdmFsdWVzLCByZW5kZXIsIGJpbmRzLCBiaW5kQXR0ciwgYmluZEluQXR0ciwgaXNKUXVlcnksIGNvbm5lY3Rpb25zLCByZW1vdmVPbmxvYWQgfSA6IERvY09iamVjdE9wdGlvbnMgPSBEb2NPYmplY3QuZGVmYXVsdFBhcmFtcyhvcHRpb25zKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vRXh0cmFjdCBET00gZWxlbWVudCBmcm9tIEhUTUxFbGVtZW50IE9yIEpxdWVyeSBPYmplY3RcclxuICAgICAgICBsZXQgcm9vdEVsZW1lbnQgPSBEb2NPYmplY3QudG9Ob2RlQXJyYXkocm9vdClbMF1cclxuICAgICAgICBcclxuICAgICAgICAvL1NldCBSb290IE9iamVjdFxyXG4gICAgICAgIGlmKHJvb3RFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgKXtcclxuICAgICAgICAgICAgdGhpcy5yb290ID0gcm9vdEVsZW1lbnRcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcnVuRXJyb3IoUk9PVF9FUlJPUiwgdHJ1ZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb25zID0gY29ubmVjdGlvbnM7XHJcblxyXG4gICAgICAgIC8vU2V0IEpxdWVyeVxyXG4gICAgICAgIGlmKGlzSlF1ZXJ5ICYmIHdpbmRvdy5qUXVlcnkpe1xyXG4gICAgICAgICAgICAvL0lmIEpxdWVyeSBpcyBkZXRlY3RlZCBhbmQgaXMgc2V0IHRvIGpxdWVyeSBtb2RlLi4uXHJcbiAgICAgICAgICAgIHRoaXMuX2lzSlF1ZXJ5ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vU2V0IFF1ZXJ5IFNlbGVjdCBzdGF0ZW1lbnQgdG8gdXNlIGpRdWVyeVxyXG4gICAgICAgICAgICB0aGlzLl9xdWVyeVNlbGVjdCA9ICguLi5wcm9wcykgPT4gJCh0aGlzLnJvb3QpLmZpbmQoLi4ucHJvcHMpXHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAvL0lmIEpxdWVyeSBpcyBub3QgZGV0ZWN0ZWQuLi5cclxuICAgICAgICAgICAgaWYoaXNKUXVlcnkpe1xyXG4gICAgICAgICAgICAgICAgLy9JZiBzZXQgdG8ganF1ZXJ5IG1vZGUuLi5cclxuICAgICAgICAgICAgICAgIHJ1bkVycm9yKEpRVUVSWV9OT1RfREVURUNURUQsIGZhbHNlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vU2V0IFF1ZXJ5IFNlbGVjdCBzdGF0ZW1lbnQgdG8gdXNlIEhUTUxFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGxcclxuICAgICAgICAgICAgdGhpcy5faXNKUXVlcnkgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fcXVlcnlTZWxlY3QgPSAoLi4ucHJvcHMpID0+IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yQWxsKC4uLnByb3BzKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9TZXQgUm9vdCBPYmplY3QgdG8gdGhpc1xyXG4gICAgICAgIHRoaXMucm9vdC5fRG9jT2JqZWN0ID0gdGhpcztcclxuXHJcbiAgICAgICAgLy9BZGQgcXVlcnktYWJsZSBhdHRyaWJ1dGUgdG8gcm9vdCBlbGVtZW50XHJcbiAgICAgICAgdGhpcy5yb290LnNldEF0dHJpYnV0ZSgnZG9jLW9iamVjdCcsICcnKVxyXG5cclxuICAgICAgICAvL1NldCBSZW5kZXIgRnVuY3Rpb25zXHJcbiAgICAgICAgdGhpcy5yZW5kZXIgPSByZW5kZXI7XHJcblxyXG4gICAgICAgIC8vQ3JlYXRlIFJlbGF0ZWQgRG9jR2VuXHJcbiAgICAgICAgdGhpcy5nID0gbmV3IERvY0dlbih0aGlzKVxyXG5cclxuICAgICAgICB0aGlzLmF0dHJzID0gRG9jT2JqZWN0LmV4dHJhY3RBdHRyaWJ1dGVzKCB0aGlzLnJvb3QgKVxyXG5cclxuICAgICAgICAvL1NldCBCaW5kIEZ1bmN0aW9uc1xyXG4gICAgICAgIHRoaXMuYmluZHMgPSAodHlwZW9mIGJpbmRzID09PSAnZnVuY3Rpb24nKSA/IGJpbmRzKHRoaXMuZykgOiBiaW5kcyA7XHJcblxyXG4gICAgICAgIC8vU2V0IEJpbmQgQXR0cmlidXRlXHJcbiAgICAgICAgdGhpcy5iaW5kQXR0ciA9IGJpbmRBdHRyO1xyXG5cclxuICAgICAgICAvL1NldCBCaW5kIEluIEF0dHJpYnV0ZVxyXG4gICAgICAgIHRoaXMuYmluZEluQXR0ciA9IGJpbmRJbkF0dHI7XHJcblxyXG4gICAgICAgIC8vU2V0IFF1ZXJ5IFByb3h5XHJcbiAgICAgICAgdGhpcy5xdWVyeSA9IG5ldyBQcm94eSh7fSwge1xyXG4gICAgICAgICAgICBnZXQ6ICh0YXJnZXQsIHByb3AgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIHRhcmdldFtwcm9wXSA/IHRhcmdldFtwcm9wXSA6IF8gPT4gdGhpcy5fcXVlcnlTZWxlY3QoIC8uKihcXC58XFwjfFxcW3xcXF0pLiovZ20uZXhlYyhwcm9wKSA/IHByb3AgOiAnIycgKyBwcm9wICkgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogKHRhcmdldCwgcHJvcCwgdmFsdWUsIHJlY2VpdmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgdmFsdWUgPSAoKSA9PiB0aGlzLl9xdWVyeVNlbGVjdCh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wXSA9IF8gPT4gdmFsdWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vU2V0IEVsZW1lbnRzIFByb3h5XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IG5ldyBQcm94eSh0aGlzLnF1ZXJ5LCB7XHJcbiAgICAgICAgICAgIGdldDogKHRhcmdldCwgcHJvcCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtwcm9wXSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAvL0FkZCBpbiBlbGVtZW50cyBmcm9tIG9wdGlvbnNcclxuICAgICAgICBpZiAoZWxlbWVudHMpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZWxlbWVudHMpLmZvckVhY2goKGUgPT4geyB0aGlzLnF1ZXJ5W2VbMF1dID0gZVsxXSB9KSlcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLl92YWx1ZXMgPSBuZXcgUHJveHkoIXZhbHVlcyB8fCB0eXBlb2YgdmFsdWVzICE9PSAnb2JqZWN0JyA/IHt9IDogdmFsdWVzLCB7XHJcbiAgICAgICAgICAgIHNldDogKHRhcmdldCwgcHJvcCwgdmFsdWUsIHJlY2VpdmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucnVuUmVuZGVyKHsgW3Byb3BdOiB2YWx1ZSB9KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ydW5Db25uZWN0aW9ucyh7W3Byb3BdOnZhbHVlfSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQ6ICh0YXJnZXQsIHByb3ApID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB0YXJnZXRbcHJvcF0gPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtwcm9wXSh0aGlzLmF0dHJzKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtwcm9wXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICBcclxuICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMub25Mb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJ1blJlbmRlcih7Li4udGhpcy52YWx1ZXMsIFt0cnVlIGFzIGFueV06IHRydWV9KVxyXG4gICAgICAgICAgICB0aGlzLnJ1bkNvbm5lY3Rpb25zKHRoaXMudmFsdWVzKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoIXJlbW92ZU9ubG9hZCl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2lzSlF1ZXJ5KXtcclxuICAgICAgICAgICAgICAgICQodGhpcy5vbkxvYWQpXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgd2luZG93Lm9ubG9hZCA9IHRoaXMub25Mb2FkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpc0JpbmRJbihlbGVtZW50IDogRG9jT2JqZWN0RG9tQmluZCkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKCBlbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRJbkF0dHIpICYmIHRydWUgKSBcclxuICAgIH1cclxuICAgIGlzQmluZChlbGVtZW50IDogRG9jT2JqZWN0RG9tQmluZCkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKGVsZW1lbnQubG9jYWxOYW1lID09PSAnZC1iaW5kJyB8fCBlbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRBdHRyKSkgJiYgdHJ1ZVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGlzRG9iT2JqZWN0RWxlbWVudChlbGVtZW50IDogRG9jT2JqZWN0RWxlbWVudCApIDogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICggZWxlbWVudC5fRG9jT2JqZWN0IGluc3RhbmNlb2YgRG9jT2JqZWN0ICApXHJcbiAgICB9XHJcbiAgICBcclxuXHJcblxyXG4gICAgZmluZE9yUmVnaXN0ZXJCaW5kKERPTWVsZW1lbnQgOiBEb2NPYmplY3REb21CaW5kKSA6IERvY09iamVjdENvbmZpZyB7XHJcbiAgICAgICAgaWYoRE9NZWxlbWVudC5fRG9jT2JqZWN0Q29uZmlnID09PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBsZXQgb3JpZ2luYWxDaGlsZHJlbiA9IHRoaXMuX2lzSlF1ZXJ5ID8gJChbLi4uRE9NZWxlbWVudC5jaGlsZE5vZGVzXSkgOiBbLi4uRE9NZWxlbWVudC5jaGlsZE5vZGVzXVxyXG4gICAgICAgICAgICBvcmlnaW5hbENoaWxkcmVuLnRvU3RyaW5nID0gKCk9PiBET01lbGVtZW50LmlubmVySFRNTFxyXG4gICAgICAgICAgICBET01lbGVtZW50Ll9Eb2NPYmplY3RDb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbENoaWxkcmVuLFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxDaGlsZHJlbkhUTUw6IERPTWVsZW1lbnQuaW5uZXJIVE1MLFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxBdHRyaWJ1dGVzOiBEb2NPYmplY3QuZXh0cmFjdEF0dHJpYnV0ZXMoRE9NZWxlbWVudClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gRE9NZWxlbWVudC5fRG9jT2JqZWN0Q29uZmlnXHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVCaW5kKGVsZW1lbnQgOiBEb2NPYmplY3REb21CaW5kLCBiaW5kLCBib3VuZCA6IERvY09iamVjdEhUTUxMaWtlKSA6IERvY09iamVjdERvbUJpbmQgfCBOb2RlW10ge1xyXG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVsZW1lbnQuX0RvY09iamVjdENvbmZpZztcclxuICAgICAgICBjb25zdCBub2RlQXJyYXkgPSBEb2NPYmplY3QudG9Ob2RlQXJyYXkodHlwZW9mIGJvdW5kID09PSAnZnVuY3Rpb24nID8gKGJvdW5kLmJpbmQodGhpcy5fdGhpcykpKHRoaXMuZykgOiBib3VuZCk7XHJcbiAgICAgICAgaWYodGhpcy5pc0JpbmQoZWxlbWVudCkpe1xyXG4gICAgICAgICAgICBjb25zdCBmaXJzdEVsZW1lbnQgPSBub2RlQXJyYXkuZmluZChlbCA9PiBlbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSBhcyBEb2NPYmplY3REb21CaW5kO1xyXG4gICAgICAgICAgICBmaXJzdEVsZW1lbnQuX0RvY09iamVjdENvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICAgICAgZmlyc3RFbGVtZW50LnNldEF0dHJpYnV0ZSgoZmlyc3RFbGVtZW50LmxvY2FsTmFtZSA9PT0gJ2QtYmluZCcgPyAndG8nIDogdGhpcy5iaW5kQXR0ciksIGJpbmQpXHJcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGNvbmZpZy5vcmlnaW5hbEF0dHJpYnV0ZXMpLmZpbHRlcihhdHRBPT4hKFsnZC1iaW5kLWluJywgJ3RvJ10uaW5jbHVkZXMoYXR0QVswXSkpKS5mb3JFYWNoKGF0dEE9PmZpcnN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0QVswXSwgYXR0QVsxXSkpXHJcbiAgICAgICAgICAgIHJldHVybiBmaXJzdEVsZW1lbnQ7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlQXJyYXk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgcnVuUmVuZGVyKHZhbHVlQ2hhbmdlcyA9IHt9KSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmVuZGVyLmZpbHRlcihyZW4gPT4gKHJlbi5kZXAgJiYgQXJyYXkuaXNBcnJheShyZW4uZGVwKSAmJiByZW4uZGVwLnNvbWUoKGRlcHApID0+IChkZXBwIGluIHZhbHVlQ2hhbmdlcykpKSB8fCAocmVuLmRlcCA9PT0gdW5kZWZpbmVkKSkuZm9yRWFjaChyZW4gPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVuLmNsZWFuKSByZW4uY2xlYW4oeyAuLi50aGlzLnZhbHVlcywgLi4udmFsdWVDaGFuZ2VzIH0sIHRoaXMudmFsdWVzKVxyXG4gICAgICAgICAgICByZW4uYWN0aW9uKHsgLi4udGhpcy52YWx1ZXMsIC4uLnZhbHVlQ2hhbmdlcyB9LCB0aGlzLnZhbHVlcylcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMucnVuQmluZHMoe3Jvb3Q6dGhpcy5yb290LCB2YWx1ZUNoYW5nZXMsIGFkZGl0aW9uYWxIb3N0czpbdGhpcy5yb290XSwgbWVtb2l6ZWRFbGVtZW50czpbXSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRCaW5kQWN0aW9uKGVsZW1lbnQgOiBIVE1MRWxlbWVudCwgdmFsdWVDaGFuZ2VzOiBvYmplY3QpIDogW3N0cmluZywgKHJlcGxhY2UgOiBOb2RlIHwgTm9kZUxpc3QgfCBOb2RlW10gKT0+IHZvaWQgXSB8IG51bGwge1xyXG4gICAgICAgIGlmKHRoaXMuaXNCaW5kKGVsZW1lbnQpKXtcclxuICAgICAgICAgICAgaWYoZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kQXR0cikpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtlbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRBdHRyKSwgKHJlcGxhY2UpPT5lbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHJlcGxhY2UgYXMgTm9kZSwgZWxlbWVudCldXHJcbiAgICAgICAgICAgIH1lbHNlIGlmKGVsZW1lbnQubG9jYWxOYW1lID09PSAnZC1iaW5kJyl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2VsZW1lbnQuZ2V0QXR0cmlidXRlKCd0bycpLCAocmVwbGFjZSk9PmVsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQocmVwbGFjZSBhcyBOb2RlLCBlbGVtZW50KV1cclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9ZWxzZSBpZih0aGlzLmlzQmluZEluKGVsZW1lbnQpKXtcclxuICAgICAgICAgICAgcmV0dXJuIFtlbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRJbkF0dHIpLCAocmVwbGFjZSk9PntcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBub2RlIG9mIHJlcGxhY2UgYXMgTm9kZUxpc3QpIGVsZW1lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICAgICAgICAgIH1dXHJcbiAgICAgICAgfWVsc2UgaWYoRG9jT2JqZWN0LmlzRG9iT2JqZWN0RWxlbWVudChlbGVtZW50KSl7XHJcbiAgICAgICAgICAgIGlmKGVsZW1lbnQgPT09IHRoaXMucm9vdCApe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsndGhpcycsICAgKHJlcGxhY2UpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBub2RlIG9mIHJlcGxhY2UgYXMgTm9kZUxpc3QpIGVsZW1lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIChlbGVtZW50IGFzIERvY09iamVjdEVsZW1lbnQpLl9Eb2NPYmplY3QucnVuUmVuZGVyKHZhbHVlQ2hhbmdlcylcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBxdWVyeVNlbGVjdG9yQWxsID0gKHNlbGVjdG9yIDogc3RyaW5nKSA9PiB0aGlzLnJvb3QucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcilcclxuICAgIHJ1bkJpbmRzKHBhcmFtczogRG9jT2JqZWN0UnVuQmluZE9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCB7IHJvb3QsIHZhbHVlQ2hhbmdlcywgYWRkaXRpb25hbEhvc3RzLCBtZW1vaXplZEVsZW1lbnRzIH0gPSB0aGlzLmRlZmF1bHRSdW5CaW5kT3B0aW9ucyhwYXJhbXMpO1xyXG4gICAgICAgIChBcnJheS5pc0FycmF5KHJvb3QpID8gcm9vdCA6IFtyb290XSlcclxuICAgICAgICAgICAgLmZpbHRlcihydCA9PiBydCAmJiBydCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KVxyXG4gICAgICAgICAgICAuZm9yRWFjaCgocnQpID0+IHtcclxuICAgICAgICAgICAgICAgIFsuLi4ocnQucXVlcnlTZWxlY3RvckFsbChgWyR7dGhpcy5iaW5kQXR0cn1dLCBbJHt0aGlzLmJpbmRJbkF0dHJ9XSwgZC1iaW5kW3RvXSwgW2RvYy1vYmplY3RdYCkpLCAuLi5hZGRpdGlvbmFsSG9zdHNdXHJcbiAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1NraXAgaWYgdGhpcyBub2RlIGhhcyBiZWVuIGJvdW5kIGRvd24gdGhlIHJlY3Vyc2lvbiBjeWNsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihtZW1vaXplZEVsZW1lbnRzLnNvbWUoZSA9PiAoZWxlbWVudCBhcyBIVE1MRWxlbWVudCkuaXNTYW1lTm9kZShlKSkpIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9BZGQgdG8gbWVtb2l6ZWRFbGVtZW50cyB0byBiZSBza2lwcGVkIGluIHRoZSBmdXR1cmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVtb2l6ZWRFbGVtZW50cy5wdXNoKGVsZW1lbnQpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5kSW5zdHJ1Y3Rpb25zID0gdGhpcy5nZXRCaW5kQWN0aW9uKGVsZW1lbnQsIHZhbHVlQ2hhbmdlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpbmRJbnN0cnVjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vR2V0IFRoZSBCaW5kIE1ldGhvZCwgYW5kIHRoZSBGdW5jdGlvbiB0byBpbnNlcnQgSFRNTCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtiaW5kLCBiaW5kQWN0aW9uXSA9IGJpbmRJbnN0cnVjdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0NoZWNrIGlmIEJpbmQgRXhpc3RzIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpbmQgaW4gdGhpcy5iaW5kcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vR2V0IE9yIHJlZ2lzdGVyIEJpbmQgVGFnJ3MgQ29uZmlnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5maW5kT3JSZWdpc3RlckJpbmQoZWxlbWVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0luc2VydCBIVE1MXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZEFjdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydW5CaW5kcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290OiB0aGlzLmdlbmVyYXRlQmluZCggIC8vV3JhcCBCaW5kIE1ldGhvZCB0byBwcmVwYXJlIGJpbmQgZm9yIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kLCAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUnVuIEJpbmQgTWV0aG9kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9FeHRyYWN0IEJpbmQgYW5kIFVzZSBKYXZhU2NyaXB0J3MgYmluZCBtZXRob2QgdG8gc2V0IHRoaXMgdG8gRG9jT2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYmluZHNbYmluZF0uYmluZCh0aGlzLl90aGlzKSkoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzLCAvL1Bhc3MgaW4gdXBkYXRlcyB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLm9yaWdpbmFsQXR0cmlidXRlcywgLy9QYXNzIGluIG9yaWdpbmFsIGF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLm9yaWdpbmFsQ2hpbGRyZW4sIC8vUGFzcyBpbiBvcmlnaW5hbCBjaGlsZHJlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUNoYW5nZXMgLy9DaGFuZ2VzIHRoYXQgdHJpZ2dlcmVkIHJlbmRlciAoSW5jbHVkaW5nIGEgcGFyZW50J3MgRG9jT2JqZWN0IHZhbHVlIGNoYW5nZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlQ2hhbmdlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9pemVkRWxlbWVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICByZXR1cm4gcm9vdDtcclxuICAgIH1cclxuXHJcbiAgICBydW5Db25uZWN0aW9ucyh2YWx1ZUNoYW5nZXMgOiB7W2tleSA6IHN0cmluZ3xzeW1ib2xdIDogYW55IH0gPSB7W3RydWUgYXMgYW55XTp0cnVlfSApe1xyXG4gICAgICAgIGZvcihsZXQga3kgaW4gdmFsdWVDaGFuZ2VzKXtcclxuICAgICAgICAgICAgdGhpcy5fY29ubmVjdGlvbnMuZm9yRWFjaCgoY29ubmVjdGVkKSA9PiBjb25uZWN0ZWQudmFsdWVzW2t5XSA9IHZhbHVlQ2hhbmdlc1treV0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBjb25uZWN0KC4uLmRvY09iamVjdHMgOiBbRG9jT2JqZWN0XSl7XHJcbiAgICAgICAgdGhpcy5fY29ubmVjdGlvbnMgPSBbLi4udGhpcy5fY29ubmVjdGlvbnMsIC4uLmRvY09iamVjdHNdXHJcbiAgICAgICAgdGhpcy5ydW5Db25uZWN0aW9ucyh0aGlzLnZhbHVlcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuLypcclxudmFyIGRvYyA9IG5ldyBEb2NPYmplY3Qoe1xyXG4gICAgdmFsdWVzOiB7XHJcbiAgICB9LFxyXG4gICAgZWxlbWVudHM6e1xyXG5cclxuICAgIH0sXHJcbiAgICBiaW5kczp7XHJcblxyXG4gICAgfSxcclxuICAgIHJlbmRlcjogW1xyXG5cclxuICAgIF1cclxufSk7ICQoZG9jLm9uTG9hZClcclxuKi8iLCJcclxuXHJcbmV4cG9ydCBjb25zdCBST09UX0VSUk9SID0gJ1JPT1RfRVJST1InXHJcbmV4cG9ydCBjb25zdCBKUVVFUllfTk9UX0RFVEVDVEVEID0gJ0pRVUVSWV9OT1RfREVURUNURUQnXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcnVuRXJyb3IoZXJyb3IgOiBzdHJpbmcsIGZhaWw9ZmFsc2Upe1xyXG4gICAgaWYoZXJyb3IgaW4gRVJST1JTKXtcclxuICAgICAgICBpZihmYWlsKXtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0RvY09iamVjdDogJysgRVJST1JTW2Vycm9yXS5tZXNzYWdlKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihFUlJPUlNbZXJyb3JdLm1lc3NhZ2UpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBST09UX0VSUk9SIDoge1xyXG4gICAgICAgIG1lc3NhZ2U6IFwiUm9vdCBFbGVtZW50IE11c3QgYmUgYSB2YWxpZCBOb2RlLCBPciBqUXVlcnkgRWxlbWVudFwiXHJcbiAgICB9LFxyXG4gICAgSlFVRVJZX05PVF9ERVRFQ1RFRDoge1xyXG4gICAgICAgIG1lc3NhZ2UgOiBcIkpRdWVyeSBpcyBub3QgZGV0ZWN0ZWQuIFBsZWFzZSBsb2FkIEpRdWVyeSBiZWZvcmUgRG9jT2JqZWN0XCJcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBEb2NPYmplY3QsIERvY09iamVjdEVsZW1lbnQgfSBmcm9tIFwiLi9kb2NvYmplY3RcIjtcclxuaW1wb3J0IERvY0dlbiBmcm9tIFwiLi9kb2NnZW5cIjtcclxuaW1wb3J0IHtzZXRDdXJzb3JQb3MsIGdldEN1cnNvclBvc30gZnJvbSBcIi4vdXRpbHNcIlxyXG5cclxuY2xhc3MgQmluZCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7bW9kZTogXCJvcGVuXCJ9KTtcclxuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmQoZGl2KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4vKioqKioqKiBVVElMSVRZIE1FVEhPRFMgKioqKioqKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZpeElucHV0KHNlbGVjdG9yLCBhY3Rpb24pe1xyXG4gICAgbGV0IHBvcyA9IGdldEN1cnNvclBvcyhzZWxlY3RvcigpWzBdKVxyXG4gICAgYWN0aW9uKClcclxuICAgIHNldEN1cnNvclBvcyhzZWxlY3RvcigpWzBdLCBwb3MpXHJcbn1cclxuXHJcblxyXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdkLWJpbmQnLCBCaW5kKVxyXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdkb2Mtb2JqZWN0JywgRG9jT2JqZWN0RWxlbWVudClcclxuaWYod2luZG93LmpRdWVyeSl7XHJcbiAgICAoZnVuY3Rpb24oJCkge1xyXG4gICAgICAgICQuZm4uZXh0ZW5kKHtcclxuICAgICAgICAgICAgRG9jT2JqZWN0IDogZnVuY3Rpb24oIG9wdGlvbnMgPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzWzBdLl9Eb2NPYmplY3QgJiYgIW9wdGlvbnMgKSByZXR1cm4gdGhpc1swXS5fRG9jT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEb2NPYmplY3QodGhpcywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG5ldyBEb2NPYmplY3QodGhpcywgeyBpc0pRdWVyeTp0cnVlLCAuLi5vcHRpb25zIH0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1swXS5fRG9jT2JqZWN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pKGpRdWVyeSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvYmoocm9vdCA6IERvY09iamVjdEVsZW1lbnQgfCBKUXVlcnksIG9wdGlvbnMgOiBvYmplY3QpIDogRG9jT2JqZWN0IHtcclxuICAgIHJldHVybiBuZXcgRG9jT2JqZWN0KHJvb3QsIG9wdGlvbnMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuKCkgOiBEb2NHZW4ge1xyXG4gICAgcmV0dXJuIG5ldyBEb2NHZW4oKVxyXG59XHJcbiIsImludGVyZmFjZSBEb2N1bWVudCB7XHJcbiAgICBzZWxlY3Rpb246IHtcclxuICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxuLy8gQ3JlZGl0czogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjg5NzE1NS9nZXQtY3Vyc29yLXBvc2l0aW9uLWluLWNoYXJhY3RlcnMtd2l0aGluLWEtdGV4dC1pbnB1dC1maWVsZFxyXG4gZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnNvclBvcyhlbGVtZW50IDogSFRNTElucHV0RWxlbWVudCkgOiBudW1iZXIge1xyXG4gICAgLy8gaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xyXG4gICAgLy8gICAgIGVsZW1lbnQuZm9jdXMoKTtcclxuICAgIC8vICAgICByZXR1cm4gIGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgLWVsZW1lbnQudmFsdWUubGVuZ3RoKTtcclxuICAgIC8vIH1cclxuICAgICAgICByZXR1cm4gZWxlbWVudC5zZWxlY3Rpb25EaXJlY3Rpb24gPT0gJ2JhY2t3YXJkJyA/IGVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgOiBlbGVtZW50LnNlbGVjdGlvbkVuZDtcclxufVxyXG5cclxuLy8gQ3JlZGl0czogaHR0cDovL2Jsb2cudmlzaGFsb24ubmV0L2luZGV4LnBocC9qYXZhc2NyaXB0LWdldHRpbmctYW5kLXNldHRpbmctY2FyZXQtcG9zaXRpb24taW4tdGV4dGFyZWEvXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJzb3JQb3MoZWxlbWVudCA6IEhUTUxJbnB1dEVsZW1lbnQsIHBvcyA6IG51bWJlcikgOiB2b2lkIHtcclxuICAgIC8vIE1vZGVybiBicm93c2Vyc1xyXG4gICAgaWYgKGVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UpIHtcclxuICAgIGVsZW1lbnQuZm9jdXMoKTtcclxuICAgIGVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UocG9zLCBwb3MpO1xyXG4gICAgXHJcbiAgICAvLyBJRTggYW5kIGJlbG93XHJcbiAgICB9IGVsc2UgaWYgKChlbGVtZW50IGFzIGFueSkuY3JlYXRlVGV4dFJhbmdlKSB7XHJcbiAgICAgIHZhciByYW5nZSA9IChlbGVtZW50IGFzIGFueSkuY3JlYXRlVGV4dFJhbmdlKCk7XHJcbiAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpO1xyXG4gICAgICByYW5nZS5tb3ZlRW5kKCdjaGFyYWN0ZXInLCBwb3MpO1xyXG4gICAgICByYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHBvcyk7XHJcbiAgICAgIHJhbmdlLnNlbGVjdCgpO1xyXG4gICAgfVxyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOTQpO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwib2JqIiwidGhpcyIsIlByb3h5IiwiZ2V0IiwidGFyZ2V0IiwicHJvcCIsIkdlbiIsImlubmVyIiwiYXR0cnMiLCJiaW5kcyIsImJvdW5kIiwidmFsdWVzIiwiRG9jT2JqZWN0IiwidG9Ob2RlQXJyYXkiLCJnIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImtleSIsInNrZXkiLCJzdHlsZSIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwic2V0QXR0cmlidXRlIiwiZm9yRWFjaCIsImluZSIsImFwcGVuZENoaWxkIiwiRG9jT2JqZWN0RWxlbWVudCIsIkhUTUxFbGVtZW50Iiwic3VwZXIiLCJyb290Iiwib3B0aW9ucyIsIl90aGlzIiwicXVlcnlTZWxlY3RvckFsbCIsInNlbGVjdG9yIiwiZWxlbWVudHMiLCJyZW5kZXIiLCJiaW5kQXR0ciIsImJpbmRJbkF0dHIiLCJpc0pRdWVyeSIsImNvbm5lY3Rpb25zIiwicmVtb3ZlT25sb2FkIiwiZGVmYXVsdFBhcmFtcyIsInJvb3RFbGVtZW50IiwiUk9PVF9FUlJPUiIsIl9jb25uZWN0aW9ucyIsIndpbmRvdyIsImpRdWVyeSIsIl9pc0pRdWVyeSIsIl9xdWVyeVNlbGVjdCIsInByb3BzIiwiJCIsImZpbmQiLCJKUVVFUllfTk9UX0RFVEVDVEVEIiwiX0RvY09iamVjdCIsImV4dHJhY3RBdHRyaWJ1dGVzIiwicXVlcnkiLCJfIiwiZXhlYyIsInNldCIsInZhbHVlIiwicmVjZWl2ZXIiLCJlbnRyaWVzIiwiZSIsIl92YWx1ZXMiLCJydW5SZW5kZXIiLCJydW5Db25uZWN0aW9ucyIsIm9uTG9hZCIsIm9ubG9hZCIsInN0YXRpYyIsImFueSIsInBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInRvU3RyaW5nIiwiYm9keSIsImNoaWxkTm9kZXMiLCJOb2RlTGlzdCIsInByb3RvdHlwZSIsImlzUHJvdG90eXBlT2YiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJOb2RlIiwibWFwIiwiRG9jdW1lbnQiLCJhdHRyaWJ1dGVzIiwicmVkdWNlIiwiYSIsImMiLCJyZXBsYWNlIiwidG9VcHBlckNhc2UiLCJkZWZhdWx0UnVuQmluZE9wdGlvbnMiLCJ2YWx1ZUNoYW5nZXMiLCJhZGRpdGlvbmFsSG9zdHMiLCJtZW1vaXplZEVsZW1lbnRzIiwiRXJyb3IiLCJpc0JpbmRJbiIsImdldEF0dHJpYnV0ZSIsImlzQmluZCIsImxvY2FsTmFtZSIsImZpbmRPclJlZ2lzdGVyQmluZCIsIkRPTWVsZW1lbnQiLCJ1bmRlZmluZWQiLCJfRG9jT2JqZWN0Q29uZmlnIiwib3JpZ2luYWxDaGlsZHJlbiIsImlubmVySFRNTCIsIm9yaWdpbmFsQ2hpbGRyZW5IVE1MIiwib3JpZ2luYWxBdHRyaWJ1dGVzIiwiZ2VuZXJhdGVCaW5kIiwiYmluZCIsImNvbmZpZyIsIm5vZGVBcnJheSIsImZpcnN0RWxlbWVudCIsImVsIiwiYXR0QSIsImluY2x1ZGVzIiwicmVuIiwiZGVwIiwic29tZSIsImRlcHAiLCJjbGVhbiIsImFjdGlvbiIsInJ1bkJpbmRzIiwiZ2V0QmluZEFjdGlvbiIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJub2RlIiwiaXNEb2JPYmplY3RFbGVtZW50IiwicGFyYW1zIiwicnQiLCJpc1NhbWVOb2RlIiwicHVzaCIsImJpbmRJbnN0cnVjdGlvbnMiLCJiaW5kQWN0aW9uIiwia3kiLCJjb25uZWN0ZWQiLCJjb25uZWN0IiwiZG9jT2JqZWN0cyIsIkRPTVBhcnNlciIsImVycm9yIiwiZmFpbCIsIkVSUk9SUyIsIm1lc3NhZ2UiLCJjb25zb2xlIiwiQmluZCIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJkaXYiLCJkaXNwbGF5Iiwic2hhZG93Um9vdCIsImFwcGVuZCIsInBvcyIsImdldEN1cnNvclBvcyIsInNldEN1cnNvclBvcyIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiZm4iLCJleHRlbmQiLCJlYWNoIiwic2VsZWN0aW9uRGlyZWN0aW9uIiwic2VsZWN0aW9uU3RhcnQiLCJzZWxlY3Rpb25FbmQiLCJzZXRTZWxlY3Rpb25SYW5nZSIsImZvY3VzIiwiY3JlYXRlVGV4dFJhbmdlIiwicmFuZ2UiLCJjb2xsYXBzZSIsIm1vdmVFbmQiLCJtb3ZlU3RhcnQiLCJzZWxlY3QiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==