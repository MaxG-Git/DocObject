var Doc;!function(){"use strict";var t={360:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});const i=n(391);e.default=class{constructor(t){return this.obj=t,new Proxy(this,{get:(t,e)=>this.Gen(e)})}Gen(t){return(e=[],n)=>{if(this.obj&&t in this.obj.binds){const r=this.obj.binds[t](this.obj.values,n,i.DocObject.toNodeArray(e),this.obj.values);return"function"==typeof r?r(this.obj.g):r}let r=document.createElement(t);for(let t in n)if("style"===t&&"object"==typeof n[t])for(let e in n[t])r.style[e]=n[t][e];else t in Object.getPrototypeOf(r)?r[t]=n[t]:r.setAttribute(t,n[t]);return i.DocObject.toNodeArray(e).forEach((t=>{t.parentElement&&"D-BIND"===t.parentElement.nodeName?r.appendChild(t.cloneNode(!0)):r.appendChild(t)})),r}}}},391:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DocObject=e.DocObjectElement=void 0;const c=s(n(360)),a=o(n(382));class u extends HTMLElement{constructor(){super()}}e.DocObjectElement=u;class d{constructor(t,e){this._this=this,this.querySelectorAll=t=>this.root.querySelectorAll(t);const{elements:n,values:i,render:r,binds:o,bindAttr:s,bindInAttr:u,isJQuery:l,connections:h,removeOnload:f}=d.defaultParams(e);let b=d.toNodeArray(t)[0];b instanceof HTMLElement?this.root=b:(0,a.default)(a.ROOT_ERROR,!0),this._connections=h,l&&window.jQuery?(this._isJQuery=!0,this._querySelect=(...t)=>$(this.root).find(...t)):(l&&(0,a.default)(a.JQUERY_NOT_DETECTED,!1),this._isJQuery=!1,this._querySelect=(...t)=>this.root.querySelectorAll(...t)),this.root._DocObject=this,this.root.setAttribute("doc-object",""),this.render=r,this.g=new c.default(this),this.attrs=d.extractAttributes(this.root),this.binds="function"==typeof o?o(this.g):o,this.bindAttr=s,this.bindInAttr=u,this.query=new Proxy({},{get:(t,e)=>{if("string"==typeof e)return t[e]?t[e]:t=>this._querySelect(/.*(\.|\#|\[|\]).*/gm.exec(e)?e:"#"+e)},set:(t,e,n,i)=>("string"==typeof n&&(n=()=>this._querySelect(n)),"string"==typeof e&&(t[e]=t=>n),!0)}),this.elements=new Proxy(this.query,{get:(t,e)=>t[e]()}),n&&Object.entries(n).forEach((t=>{this.query[t[0]]=t[1]})),this._values=new Proxy(i&&"object"==typeof i?i:{},{set:(t,e,n,i)=>(t[e]=n,this.runRender({[e]:n}),this.runConnections({[e]:n}),!0),get:(t,e)=>"function"==typeof t[e]?t[e](this.attrs):t[e]}),this.onLoad=()=>{this.runRender(Object.assign(Object.assign({},this.values),{[!0]:!0})),this.runConnections(this.values)},f||(window.onload=this.onLoad)}static toNodeArray(t){return"string"==typeof t||"number"==typeof t?[...d.parser.parseFromString(t.toString(),"text/html").body.childNodes]:NodeList.prototype.isPrototypeOf(t)||window.jQuery&&t instanceof jQuery?[...t]:Array.isArray(t)?t.filter((t=>"string"==typeof t||t instanceof Node)).map((t=>"string"==typeof t?d.toNodeArray(t)[0]:t)):t instanceof Node||t instanceof Document?[t]:[]}static defaultParams({render:t=[],binds:e={},elements:n={},values:i={},bindAttr:r="d-bind",bindInAttr:o="d-bind-in",isJQuery:s=!1,connections:c=[],removeOnload:a=!1}={}){return{elements:n,values:i,render:t,binds:e,bindAttr:r,bindInAttr:o,isJQuery:s,connections:c,removeOnload:a}}static extractAttributes(t){return[...t.attributes].reduce(((t,e)=>Object.assign(Object.assign({},t),{[e.name.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))]:e.value})),{})}defaultRunBindOptions({root:t,valueChanges:e,additionalHosts:n=[],memoizedElements:i=[]}){return{root:t,valueChanges:e,additionalHosts:n,memoizedElements:i}}set values(t){throw Error("Tried to set DocObject.value. Try creating a inner object instead.")}get values(){return this._values}isBindIn(t){return t.getAttribute(this.bindInAttr)&&!0}isBind(t){return("d-bind"===t.localName||t.getAttribute(this.bindAttr))&&!0}static isDobObjectElement(t){return t._DocObject instanceof d}findOrRegisterBind(t){if(void 0===t._DocObjectConfig){let e=this._isJQuery?$([...t.childNodes]):[...t.childNodes];e.toString=()=>t.innerHTML,t._DocObjectConfig={originalChildren:e,originalChildrenHTML:t.innerHTML,originalAttributes:d.extractAttributes(t)}}return t._DocObjectConfig}generateBind(t,e,n){const i=t._DocObjectConfig,r=d.toNodeArray("function"==typeof n?n.bind(this._this)(this.g):n);if(this.isBind(t)){const t=r.find((t=>t instanceof HTMLElement));return t._DocObjectConfig=i,t.setAttribute("d-bind"===t.localName?"to":this.bindAttr,e),Object.entries(i.originalAttributes).filter((t=>!["d-bind-in","to"].includes(t[0]))).forEach((e=>t.setAttribute(e[0],e[1]))),t}return r}runRender(t={}){this.render.filter((e=>e.dep&&Array.isArray(e.dep)&&e.dep.some((e=>e in t))||void 0===e.dep)).forEach((e=>{e.clean&&e.clean(Object.assign(Object.assign({},this.values),t),this.values),e.action(Object.assign(Object.assign({},this.values),t),this.values)})),this.runBinds({root:this.root,valueChanges:t,additionalHosts:[this.root],memoizedElements:[]})}getBindAction(t,e){if(this.isBind(t)){if(t.getAttribute(this.bindAttr))return[t.getAttribute(this.bindAttr),e=>t.parentNode.replaceChild(e,t)];if("d-bind"===t.localName)return[t.getAttribute("to"),e=>t.parentNode.replaceChild(e,t)]}else{if(this.isBindIn(t))return[t.getAttribute(this.bindInAttr),e=>{t.innerHTML="";for(let n of e)t.appendChild(n)}];if(d.isDobObjectElement(t))return t===this.root?["this",e=>{t.innerHTML="";for(let n of e)t.appendChild(n)}]:(t._DocObject.runRender(e),null)}}runBinds(t){const{root:e,valueChanges:n,additionalHosts:i,memoizedElements:r}=this.defaultRunBindOptions(t);return(Array.isArray(e)?e:[e]).filter((t=>t&&t instanceof HTMLElement)).forEach((t=>{[...t.querySelectorAll(`[${this.bindAttr}], [${this.bindInAttr}], d-bind[to], [doc-object]`),...i].forEach((t=>{if(r.some((e=>t.isSameNode(e))))return;r.push(t);const e=this.getBindAction(t,n);if(e){const[i,o]=e;if(i in this.binds){const e=this.findOrRegisterBind(t);o(this.runBinds({root:this.generateBind(t,i,this.binds[i].bind(this._this)(this.values,e.originalAttributes,e.originalChildren,n)),valueChanges:n,memoizedElements:r}))}}}))})),e}runConnections(t={[!0]:!0}){for(let e in t)this._connections.forEach((n=>n.values[e]=t[e]))}connect(...t){return this._connections=[...this._connections,...t],this.runConnections(this.values),this}}e.DocObject=d,d.parser=new DOMParser},382:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.JQUERY_NOT_DETECTED=e.ROOT_ERROR=void 0,e.ROOT_ERROR="ROOT_ERROR",e.JQUERY_NOT_DETECTED="JQUERY_NOT_DETECTED",e.default=function(t,e=!1){if(t in n){if(e)throw Error("DocObject: "+n[t].message);console.error(n[t].message)}};const n={ROOT_ERROR:{message:"Root Element Must be a valid Node, Or jQuery Element"},JQUERY_NOT_DETECTED:{message:"JQuery is not detected. Please load JQuery before DocObject"}}},294:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.gen=e.obj=e.fixInput=void 0;const r=n(391),o=i(n(360)),s=n(605);class c extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});const t=document.createElement("div");t.style.display="none",this.shadowRoot.append(t)}}e.fixInput=function(t,e){let n=(0,s.getCursorPos)(t()[0]);e(),(0,s.setCursorPos)(t()[0],n)},window.customElements.define("d-bind",c),window.customElements.define("doc-object",r.DocObjectElement),window.jQuery&&jQuery.fn.extend({DocObject:function(t=null){return this[0]._DocObject&&!t||(this.each((function(){new r.DocObject(this,t)})),new r.DocObject(this,Object.assign({isJQuery:!0},t))),this[0]._DocObject}}),e.obj=function(t,e){return new r.DocObject(t,e)},e.gen=function(){return new o.default}},605:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.setCursorPos=e.getCursorPos=void 0,e.getCursorPos=function(t){return"backward"==t.selectionDirection?t.selectionStart:t.selectionEnd},e.setCursorPos=function(t,e){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}}}},e={},n=function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}(294);Doc=n}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y0FJM0Ysd0JBQTZCckosRUFBNEIySSxHQUVyRCxHQUFJM0ksRUFBUXNKLGtCQUNadEosRUFBUXVKLFFBQ1J2SixFQUFRc0osa0JBQWtCWCxFQUFLQSxRQUd4QixHQUFLM0ksRUFBZ0J3SixnQkFBaUIsQ0FDM0MsSUFBSUMsRUFBU3pKLEVBQWdCd0osa0JBQzdCQyxFQUFNQyxVQUFTLEdBQ2ZELEVBQU1FLFFBQVEsWUFBYWhCLEdBQzNCYyxFQUFNRyxVQUFVLFlBQWFqQixHQUM3QmMsRUFBTUksYUMzQlJDLEVBQTJCLEdDRTNCQyxFRENKLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSixFQUF5QkcsR0FDNUMsUUFBcUJ2RSxJQUFqQndFLEVBQ0gsT0FBT0EsRUFBYUMsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJHLEdBQVksQ0FHakRFLFFBQVMsSUFPVixPQUhBRSxFQUFvQkosR0FBVUssS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0gsR0FHcEVJLEVBQU9ELFFDbEJXSCxDQUFvQixLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vRG9jLy4vc3JjL3RzL2RvY2dlbi50cyIsIndlYnBhY2s6Ly9Eb2MvLi9zcmMvdHMvZG9jb2JqZWN0LnRzIiwid2VicGFjazovL0RvYy8uL3NyYy90cy9lcnJvcnMudHMiLCJ3ZWJwYWNrOi8vRG9jLy4vc3JjL3RzL2luZGV4LnRzIiwid2VicGFjazovL0RvYy8uL3NyYy90cy91dGlscy50cyIsIndlYnBhY2s6Ly9Eb2Mvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vRG9jL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0RvY09iamVjdCwgRG9jT2JqZWN0SFRNTExpa2V9IGZyb20gJy4vZG9jb2JqZWN0J1xyXG5pbXBvcnQgeyBEb2NPYmplY3RCaW5kQXR0cmlidXRlIH0gZnJvbSAnLi9kb2NiaW5kJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRG9jR2VuIHtcclxuICAgIFxyXG4gICAgb2JqID8gOiBEb2NPYmplY3QgXHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKG9iaj8gOiBEb2NPYmplY3Qpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMub2JqID0gb2JqXHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodGhpcywge1xyXG4gICAgICAgICAgICBnZXQ6KHRhcmdldCwgcHJvcCApID0+IHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuR2VuKHByb3AgYXMgc3RyaW5nKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBHZW4ocHJvcCA6IHN0cmluZyl7XHJcbiAgICAgICAgcmV0dXJuIChpbm5lciA6IERvY09iamVjdEhUTUxMaWtlIHwgQXJyYXk8c3RyaW5nfE5vZGU+ID0gW10gLCBhdHRycyA6IERvY09iamVjdEJpbmRBdHRyaWJ1dGUpID0+IHtcclxuICAgICAgICAgICAgaWYodGhpcy5vYmogJiYgcHJvcCBpbiB0aGlzLm9iai5iaW5kcyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib3VuZCA9IHRoaXMub2JqLmJpbmRzW3Byb3BdKHRoaXMub2JqLnZhbHVlcywgYXR0cnMsIERvY09iamVjdC50b05vZGVBcnJheShpbm5lciksIHRoaXMub2JqLnZhbHVlcylcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgYm91bmQgPT09ICdmdW5jdGlvbicgPyBib3VuZCh0aGlzLm9iai5nKSA6IGJvdW5kO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChwcm9wKVxyXG4gICAgICAgICAgICBmb3IobGV0IGtleSBpbiBhdHRycyl7XHJcbiAgICAgICAgICAgICAgICBpZihrZXkgPT09ICdzdHlsZScgJiYgdHlwZW9mIGF0dHJzW2tleV0gPT09ICdvYmplY3QnICl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBza2V5IGluIGF0dHJzW2tleSBhcyBzdHJpbmddKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtza2V5XSA9IGF0dHJzW2tleV1bc2tleV1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoa2V5IGluIE9iamVjdC5nZXRQcm90b3R5cGVPZihlbGVtZW50KSl7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFtrZXldID0gYXR0cnNba2V5XVxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIERvY09iamVjdC50b05vZGVBcnJheShpbm5lcikuZm9yRWFjaChpbmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihpbmUucGFyZW50RWxlbWVudCAmJiBpbmUucGFyZW50RWxlbWVudC5ub2RlTmFtZSA9PT0gJ0QtQklORCcpe1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5lLmNsb25lTm9kZSh0cnVlKSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChpbmUpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3VycnkoZikge1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbihhKSB7XHJcbiAgICAgICAgXHJcbiAgICAgIHJldHVybiBmdW5jdGlvbihiKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGYoYSwgYik7XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICB9IiwiaW1wb3J0IHsgRG9jT2JqZWN0RG9tQmluZCwgRG9jT2JqZWN0QmluZCwgRG9jT2JqZWN0QmluZEdlbiwgRG9jT2JqZWN0QmluZEF0dHJpYnV0ZSB9IGZyb20gJy4vZG9jYmluZCdcclxuaW1wb3J0IHsgRG9jT2JqZWN0UmVuZGVyIH0gZnJvbSAnLi9kb2NyZW5kZXInXHJcbmltcG9ydCAgRG9jR2VuICBmcm9tICcuL2RvY2dlbidcclxuaW1wb3J0IHJ1bkVycm9yLCB7IFxyXG4gICAgUk9PVF9FUlJPUixcclxuICAgIEpRVUVSWV9OT1RfREVURUNURURcclxufSBmcm9tICcuL2Vycm9ycyc7XHJcblxyXG4vKioqKioqKiBHTE9CQUxTICoqKioqKiovXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICAgIGludGVyZmFjZSBXaW5kb3cge1xyXG4gICAgICAgIGpRdWVyeTphbnk7XHJcbiAgICAgICAgbXNDcnlwdG86YW55O1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuLyoqKioqKiogRE9DIE9CSkVDVCAqKioqKioqL1xyXG5leHBvcnQgdHlwZSBEb2NPYmplY3RIVE1MTGlrZSA9IFxyXG58IE5vZGVcclxufCBOb2RlTGlzdFxyXG58IEpRdWVyeSBcclxufCBOdW1iZXJcclxufCBzdHJpbmdcclxufCAoKGdlbjogRG9jR2VuKSA9PiBEb2NPYmplY3RIVE1MTGlrZSk7XHJcblxyXG5cclxuXHJcbmludGVyZmFjZSBEb2NPYmplY3RPcHRpb25zIHtcclxuICAgIHJlbmRlciA6IERvY09iamVjdFJlbmRlcjtcclxuICAgIGJpbmRzIDogRG9jT2JqZWN0QmluZCB8IERvY09iamVjdEJpbmRHZW47XHJcbiAgICBlbGVtZW50cyA6IHtba2V5OnN0cmluZ106IHN0cmluZ307XHJcbiAgICB2YWx1ZXMgOiBvYmplY3Q7XHJcbiAgICBiaW5kQXR0ciA6IHN0cmluZztcclxuICAgIGJpbmRJbkF0dHIgOiBzdHJpbmc7XHJcbiAgICBpc0pRdWVyeSA6IGJvb2xlYW47XHJcbiAgICBjb25uZWN0aW9ucyA6IEFycmF5PERvY09iamVjdD5cclxuICAgIHJlbW92ZU9ubG9hZCA6IGJvb2xlYW5cclxufVxyXG5cclxuaW50ZXJmYWNlIERvY09iamVjdFJ1bkJpbmRPcHRpb25zIHtcclxuICAgIHJvb3QgOiBhbnk7XHJcbiAgICB2YWx1ZUNoYW5nZXM6IG9iamVjdDtcclxuICAgIGFkZGl0aW9uYWxIb3N0cz8gOiBBcnJheTxIVE1MRWxlbWVudD5cclxuICAgIG1lbW9pemVkRWxlbWVudHMgOiAgQXJyYXk8RG9jT2JqZWN0RWxlbWVudHxEb2NPYmplY3REb21CaW5kPlxyXG59XHJcblxyXG4vLyBleHBvcnQgaW50ZXJmYWNlIERvY09iamVjdEVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbi8vICAgICBfRG9jT2JqZWN0PyA6IERvY09iamVjdFxyXG4vLyB9XHJcblxyXG5leHBvcnQgY2xhc3MgRG9jT2JqZWN0RWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIF9Eb2NPYmplY3Q/IDogRG9jT2JqZWN0XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpXHJcbiAgICB9XHJcbn1cclxuXHJcbmludGVyZmFjZSBEb2NPYmplY3RFbGVtZW50cyB7XHJcbiAgICBba2V5OiBzdHJpbmddIDogc3RyaW5nIHwgKChzZWxlY3RvciA6IHN0cmluZyApID0+IE5vZGVMaXN0fEpRdWVyeSlcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEb2NPYmplY3RDb25maWcge1xyXG4gICAgb3JpZ2luYWxDaGlsZHJlbjogQXJyYXk8Tm9kZT4gfCBKUXVlcnk8Q2hpbGROb2RlW10+O1xyXG4gICAgb3JpZ2luYWxDaGlsZHJlbkhUTUw6IHN0cmluZztcclxuICAgIG9yaWdpbmFsQXR0cmlidXRlczoge1trZXk6c3RyaW5nXSA6IHN0cmluZ307XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRG9jT2JqZWN0IHtcclxuXHJcbiAgICBzdGF0aWMgcGFyc2VyIDogRE9NUGFyc2VyID0gbmV3IERPTVBhcnNlcigpXHJcblxyXG4gICAgc3RhdGljIHRvTm9kZUFycmF5KGFueSA6IERvY09iamVjdEhUTUxMaWtlIHwgQXJyYXk8c3RyaW5nfE5vZGU+ICkgOiBBcnJheTxOb2RlPiB7XHJcbiAgICAgICAgaWYodHlwZW9mIGFueSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGFueSA9PT0gJ251bWJlcicpe1xyXG4gICAgICAgICAgICByZXR1cm4gWy4uLkRvY09iamVjdC5wYXJzZXIucGFyc2VGcm9tU3RyaW5nKGFueS50b1N0cmluZygpLCAndGV4dC9odG1sJykuYm9keS5jaGlsZE5vZGVzXVxyXG4gICAgICAgIH1lbHNlIGlmKE5vZGVMaXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGFueSkgfHwgKHdpbmRvdy5qUXVlcnkgJiYgYW55IGluc3RhbmNlb2YgalF1ZXJ5KSl7XHJcbiAgICAgICAgICAgIHJldHVybiBbIC4uLihhbnkgYXMgTm9kZUxpc3QpXVxyXG4gICAgICAgIH1lbHNlIGlmKEFycmF5LmlzQXJyYXkoYW55KSl7XHJcbiAgICAgICAgICAgIHJldHVybiBhbnlcclxuICAgICAgICAgICAgLmZpbHRlcihlPT4gKHR5cGVvZiBlID09PSAnc3RyaW5nJykgfHwgZSBpbnN0YW5jZW9mIE5vZGUgKVxyXG4gICAgICAgICAgICAubWFwKGU9PiAodHlwZW9mIGUgPT09ICdzdHJpbmcnKSA/IERvY09iamVjdC50b05vZGVBcnJheShlKVswXSA6IGUgKTtcclxuICAgICAgICB9IGVsc2UgaWYoYW55IGluc3RhbmNlb2YgTm9kZSB8fCBhbnkgaW5zdGFuY2VvZiBEb2N1bWVudCApe1xyXG4gICAgICAgICAgICByZXR1cm4gW2FueV1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIFtdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBkZWZhdWx0UGFyYW1zKHtcclxuICAgICAgICByZW5kZXIgPSBbXSxcclxuICAgICAgICBiaW5kcyA9IHt9LFxyXG4gICAgICAgIGVsZW1lbnRzID0ge30sXHJcbiAgICAgICAgdmFsdWVzID0ge30sXHJcbiAgICAgICAgYmluZEF0dHIgPSAnZC1iaW5kJyxcclxuICAgICAgICBiaW5kSW5BdHRyID0gJ2QtYmluZC1pbicsXHJcbiAgICAgICAgaXNKUXVlcnkgPSBmYWxzZSxcclxuICAgICAgICBjb25uZWN0aW9ucyA9IFtdLFxyXG4gICAgICAgIHJlbW92ZU9ubG9hZCA9IGZhbHNlXHJcbiAgICB9ID0ge30pIDogRG9jT2JqZWN0T3B0aW9ucyB7XHJcbiAgICAgICAgcmV0dXJuICB7IGVsZW1lbnRzLCB2YWx1ZXMsIHJlbmRlciwgYmluZHMsIGJpbmRBdHRyLCBiaW5kSW5BdHRyLCBpc0pRdWVyeSwgY29ubmVjdGlvbnMsIHJlbW92ZU9ubG9hZCB9IFxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBleHRyYWN0QXR0cmlidXRlcyhlbGVtZW50IDogRG9jT2JqZWN0RG9tQmluZCl7XHJcbiAgICAgICAgcmV0dXJuIFsuLi5lbGVtZW50LmF0dHJpYnV0ZXNdLnJlZHVjZSggKGEsYyk9PntyZXR1cm4gey4uLmEsIFsoYy5uYW1lKS5yZXBsYWNlKC8tKFthLXpdKS9nLCBmdW5jdGlvbiAoZykgeyByZXR1cm4gZ1sxXS50b1VwcGVyQ2FzZSgpOyB9KV06Yy52YWx1ZX0gfSwge30gKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBkZWZhdWx0UnVuQmluZE9wdGlvbnMoe1xyXG4gICAgICAgIHJvb3QsXHJcbiAgICAgICAgdmFsdWVDaGFuZ2VzLFxyXG4gICAgICAgIGFkZGl0aW9uYWxIb3N0cyA9IFtdLFxyXG4gICAgICAgIG1lbW9pemVkRWxlbWVudHMgPSBbXVxyXG4gICAgfSA6IERvY09iamVjdFJ1bkJpbmRPcHRpb25zICkgOiBEb2NPYmplY3RSdW5CaW5kT3B0aW9ucyB7XHJcbiAgICAgICAgcmV0dXJuIHtyb290LCB2YWx1ZUNoYW5nZXMsIGFkZGl0aW9uYWxIb3N0cywgbWVtb2l6ZWRFbGVtZW50c31cclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICByZWFkb25seSBfdmFsdWVzIDogb2JqZWN0O1xyXG4gICAgZWxlbWVudHMgOiBQcm94eUhhbmRsZXI8RG9jT2JqZWN0RWxlbWVudHM+O1xyXG4gICAgcm9vdCA6IERvY09iamVjdEVsZW1lbnQ7XHJcbiAgICByZW5kZXIgOiBEb2NPYmplY3RSZW5kZXI7XHJcbiAgICBiaW5kcyA6IERvY09iamVjdEJpbmQ7XHJcbiAgICBiaW5kQXR0ciA6IHN0cmluZztcclxuICAgIGJpbmRJbkF0dHIgOiBzdHJpbmc7XHJcbiAgICBxdWVyeSA6IFByb3h5SGFuZGxlcjxEb2NPYmplY3RFbGVtZW50cz47XHJcbiAgICBfcXVlcnlTZWxlY3QgOiAoc2VsZWN0b3I6c3RyaW5nKT0+IE5vZGVMaXN0IHwgSlF1ZXJ5O1xyXG4gICAgX2lzSlF1ZXJ5IDogYm9vbGVhblxyXG4gICAgX2Nvbm5lY3Rpb25zIDogQXJyYXk8RG9jT2JqZWN0PlxyXG4gICAgYXR0cnMgOiBEb2NPYmplY3RCaW5kQXR0cmlidXRlXHJcbiAgICBnIDogRG9jR2VuXHJcbiAgICBfdGhpcyA6IGFueSA9IHRoaXM7XHJcbiAgICBvbkxvYWQ6ICgpPT52b2lkXHJcblxyXG4gICAgc2V0IHZhbHVlcyh2YWx1ZXMpIHtcclxuICAgICAgICB0aHJvdyBFcnJvcihcIlRyaWVkIHRvIHNldCBEb2NPYmplY3QudmFsdWUuIFRyeSBjcmVhdGluZyBhIGlubmVyIG9iamVjdCBpbnN0ZWFkLlwiKVxyXG4gICAgfVxyXG4gICAgZ2V0IHZhbHVlcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWVzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKHJvb3QgOiBEb2NPYmplY3RFbGVtZW50IHwgSlF1ZXJ5IHwgc3RyaW5nLCBvcHRpb25zIDogb2JqZWN0KSB7XHJcbiAgICAgICAgLy9BZGQgRGVmYXVsdCBQYXJhbWV0ZXJzIHRvIG9wdGlvbnNcclxuICAgICAgICBjb25zdCB7IGVsZW1lbnRzLCB2YWx1ZXMsIHJlbmRlciwgYmluZHMsIGJpbmRBdHRyLCBiaW5kSW5BdHRyLCBpc0pRdWVyeSwgY29ubmVjdGlvbnMsIHJlbW92ZU9ubG9hZCB9IDogRG9jT2JqZWN0T3B0aW9ucyA9IERvY09iamVjdC5kZWZhdWx0UGFyYW1zKG9wdGlvbnMpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy9FeHRyYWN0IERPTSBlbGVtZW50IGZyb20gSFRNTEVsZW1lbnQgT3IgSnF1ZXJ5IE9iamVjdFxyXG4gICAgICAgIGxldCByb290RWxlbWVudCA9IERvY09iamVjdC50b05vZGVBcnJheShyb290KVswXVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vU2V0IFJvb3QgT2JqZWN0XHJcbiAgICAgICAgaWYocm9vdEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCApe1xyXG4gICAgICAgICAgICB0aGlzLnJvb3QgPSByb290RWxlbWVudFxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBydW5FcnJvcihST09UX0VSUk9SLCB0cnVlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY29ubmVjdGlvbnMgPSBjb25uZWN0aW9ucztcclxuXHJcbiAgICAgICAgLy9TZXQgSnF1ZXJ5XHJcbiAgICAgICAgaWYoaXNKUXVlcnkgJiYgd2luZG93LmpRdWVyeSl7XHJcbiAgICAgICAgICAgIC8vSWYgSnF1ZXJ5IGlzIGRldGVjdGVkIGFuZCBpcyBzZXQgdG8ganF1ZXJ5IG1vZGUuLi5cclxuICAgICAgICAgICAgdGhpcy5faXNKUXVlcnkgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgLy9TZXQgUXVlcnkgU2VsZWN0IHN0YXRlbWVudCB0byB1c2UgalF1ZXJ5XHJcbiAgICAgICAgICAgIHRoaXMuX3F1ZXJ5U2VsZWN0ID0gKC4uLnByb3BzKSA9PiAkKHRoaXMucm9vdCkuZmluZCguLi5wcm9wcylcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIC8vSWYgSnF1ZXJ5IGlzIG5vdCBkZXRlY3RlZC4uLlxyXG4gICAgICAgICAgICBpZihpc0pRdWVyeSl7XHJcbiAgICAgICAgICAgICAgICAvL0lmIHNldCB0byBqcXVlcnkgbW9kZS4uLlxyXG4gICAgICAgICAgICAgICAgcnVuRXJyb3IoSlFVRVJZX05PVF9ERVRFQ1RFRCwgZmFsc2UpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9TZXQgUXVlcnkgU2VsZWN0IHN0YXRlbWVudCB0byB1c2UgSFRNTEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbFxyXG4gICAgICAgICAgICB0aGlzLl9pc0pRdWVyeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl9xdWVyeVNlbGVjdCA9ICguLi5wcm9wcykgPT4gdGhpcy5yb290LnF1ZXJ5U2VsZWN0b3JBbGwoLi4ucHJvcHMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1NldCBSb290IE9iamVjdCB0byB0aGlzXHJcbiAgICAgICAgdGhpcy5yb290Ll9Eb2NPYmplY3QgPSB0aGlzO1xyXG5cclxuICAgICAgICAvL0FkZCBxdWVyeS1hYmxlIGF0dHJpYnV0ZSB0byByb290IGVsZW1lbnRcclxuICAgICAgICB0aGlzLnJvb3Quc2V0QXR0cmlidXRlKCdkb2Mtb2JqZWN0JywgJycpXHJcblxyXG4gICAgICAgIC8vU2V0IFJlbmRlciBGdW5jdGlvbnNcclxuICAgICAgICB0aGlzLnJlbmRlciA9IHJlbmRlcjtcclxuXHJcbiAgICAgICAgLy9DcmVhdGUgUmVsYXRlZCBEb2NHZW5cclxuICAgICAgICB0aGlzLmcgPSBuZXcgRG9jR2VuKHRoaXMpXHJcblxyXG4gICAgICAgIHRoaXMuYXR0cnMgPSBEb2NPYmplY3QuZXh0cmFjdEF0dHJpYnV0ZXMoIHRoaXMucm9vdCApXHJcblxyXG4gICAgICAgIC8vU2V0IEJpbmQgRnVuY3Rpb25zXHJcbiAgICAgICAgdGhpcy5iaW5kcyA9ICh0eXBlb2YgYmluZHMgPT09ICdmdW5jdGlvbicpID8gYmluZHModGhpcy5nKSA6IGJpbmRzIDtcclxuXHJcbiAgICAgICAgLy9TZXQgQmluZCBBdHRyaWJ1dGVcclxuICAgICAgICB0aGlzLmJpbmRBdHRyID0gYmluZEF0dHI7XHJcblxyXG4gICAgICAgIC8vU2V0IEJpbmQgSW4gQXR0cmlidXRlXHJcbiAgICAgICAgdGhpcy5iaW5kSW5BdHRyID0gYmluZEluQXR0cjtcclxuXHJcbiAgICAgICAgLy9TZXQgUXVlcnkgUHJveHlcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gbmV3IFByb3h5KHt9LCB7XHJcbiAgICAgICAgICAgIGdldDogKHRhcmdldCwgcHJvcCApID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBwcm9wID09ICdzdHJpbmcnKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAgdGFyZ2V0W3Byb3BdID8gdGFyZ2V0W3Byb3BdIDogXyA9PiB0aGlzLl9xdWVyeVNlbGVjdCggLy4qKFxcLnxcXCN8XFxbfFxcXSkuKi9nbS5leGVjKHByb3ApID8gcHJvcCA6ICcjJyArIHByb3AgKSBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiAodGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB2YWx1ZSA9ICgpID0+IHRoaXMuX3F1ZXJ5U2VsZWN0KHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0gXyA9PiB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy9TZXQgRWxlbWVudHMgUHJveHlcclxuICAgICAgICB0aGlzLmVsZW1lbnRzID0gbmV3IFByb3h5KHRoaXMucXVlcnksIHtcclxuICAgICAgICAgICAgZ2V0OiAodGFyZ2V0LCBwcm9wKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vQWRkIGluIGVsZW1lbnRzIGZyb20gb3B0aW9uc1xyXG4gICAgICAgIGlmIChlbGVtZW50cykge1xyXG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhlbGVtZW50cykuZm9yRWFjaCgoZSA9PiB7IHRoaXMucXVlcnlbZVswXV0gPSBlWzFdIH0pKVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHRoaXMuX3ZhbHVlcyA9IG5ldyBQcm94eSghdmFsdWVzIHx8IHR5cGVvZiB2YWx1ZXMgIT09ICdvYmplY3QnID8ge30gOiB2YWx1ZXMsIHtcclxuICAgICAgICAgICAgc2V0OiAodGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ydW5SZW5kZXIoeyBbcHJvcF06IHZhbHVlIH0pXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJ1bkNvbm5lY3Rpb25zKHtbcHJvcF06dmFsdWV9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldDogKHRhcmdldCwgcHJvcCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIHRhcmdldFtwcm9wXSA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdKHRoaXMuYXR0cnMpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgIFxyXG4gICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5vbkxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucnVuUmVuZGVyKHsuLi50aGlzLnZhbHVlcywgW3RydWUgYXMgYW55XTogdHJ1ZX0pXHJcbiAgICAgICAgICAgIHRoaXMucnVuQ29ubmVjdGlvbnModGhpcy52YWx1ZXMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighcmVtb3ZlT25sb2FkKXtcclxuICAgICAgICAgICAgd2luZG93Lm9ubG9hZCA9IHRoaXMub25Mb2FkXHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgaXNCaW5kSW4oZWxlbWVudCA6IERvY09iamVjdERvbUJpbmQpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICggZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kSW5BdHRyKSAmJiB0cnVlICkgXHJcbiAgICB9XHJcbiAgICBpc0JpbmQoZWxlbWVudCA6IERvY09iamVjdERvbUJpbmQpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIChlbGVtZW50LmxvY2FsTmFtZSA9PT0gJ2QtYmluZCcgfHwgZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kQXR0cikpICYmIHRydWVcclxuICAgIH1cclxuICAgIHN0YXRpYyBpc0RvYk9iamVjdEVsZW1lbnQoZWxlbWVudCA6IERvY09iamVjdEVsZW1lbnQgKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAoIGVsZW1lbnQuX0RvY09iamVjdCBpbnN0YW5jZW9mIERvY09iamVjdCAgKVxyXG4gICAgfVxyXG4gICAgXHJcblxyXG5cclxuICAgIGZpbmRPclJlZ2lzdGVyQmluZChET01lbGVtZW50IDogRG9jT2JqZWN0RG9tQmluZCkgOiBEb2NPYmplY3RDb25maWcge1xyXG4gICAgICAgIGlmKERPTWVsZW1lbnQuX0RvY09iamVjdENvbmZpZyA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgbGV0IG9yaWdpbmFsQ2hpbGRyZW4gPSB0aGlzLl9pc0pRdWVyeSA/ICQoWy4uLkRPTWVsZW1lbnQuY2hpbGROb2Rlc10pIDogWy4uLkRPTWVsZW1lbnQuY2hpbGROb2Rlc11cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9yaWdpbmFsQ2hpbGRyZW4udG9TdHJpbmcgPSAoKT0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBET01lbGVtZW50LmlubmVySFRNTDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBET01lbGVtZW50Ll9Eb2NPYmplY3RDb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbENoaWxkcmVuLFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxDaGlsZHJlbkhUTUw6IERPTWVsZW1lbnQuaW5uZXJIVE1MLFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxBdHRyaWJ1dGVzOiBEb2NPYmplY3QuZXh0cmFjdEF0dHJpYnV0ZXMoRE9NZWxlbWVudClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgIFxyXG4gICAgICAgIHJldHVybiBET01lbGVtZW50Ll9Eb2NPYmplY3RDb25maWdcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUJpbmQoZWxlbWVudCA6IERvY09iamVjdERvbUJpbmQsIGJpbmQsIGJvdW5kIDogRG9jT2JqZWN0SFRNTExpa2UpIDogRG9jT2JqZWN0RG9tQmluZCB8IE5vZGVbXSB7XHJcbiAgICAgICAgY29uc3QgY29uZmlnID0gZWxlbWVudC5fRG9jT2JqZWN0Q29uZmlnO1xyXG4gICAgICAgIGNvbnN0IG5vZGVBcnJheSA9IERvY09iamVjdC50b05vZGVBcnJheSh0eXBlb2YgYm91bmQgPT09ICdmdW5jdGlvbicgPyAoYm91bmQuYmluZCh0aGlzLl90aGlzKSkodGhpcy5nKSA6IGJvdW5kKTtcclxuICAgICAgICBpZih0aGlzLmlzQmluZChlbGVtZW50KSl7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0RWxlbWVudCA9IG5vZGVBcnJheS5maW5kKGVsID0+IGVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIGFzIERvY09iamVjdERvbUJpbmQ7XHJcbiAgICAgICAgICAgIGZpcnN0RWxlbWVudC5fRG9jT2JqZWN0Q29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgICAgICBmaXJzdEVsZW1lbnQuc2V0QXR0cmlidXRlKChmaXJzdEVsZW1lbnQubG9jYWxOYW1lID09PSAnZC1iaW5kJyA/ICd0bycgOiB0aGlzLmJpbmRBdHRyKSwgYmluZClcclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoY29uZmlnLm9yaWdpbmFsQXR0cmlidXRlcykuZmlsdGVyKGF0dEE9PiEoWydkLWJpbmQtaW4nLCAndG8nXS5pbmNsdWRlcyhhdHRBWzBdKSkpLmZvckVhY2goYXR0QT0+Zmlyc3RFbGVtZW50LnNldEF0dHJpYnV0ZShhdHRBWzBdLCBhdHRBWzFdKSlcclxuICAgICAgICAgICAgcmV0dXJuIGZpcnN0RWxlbWVudDtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGVBcnJheTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBydW5SZW5kZXIodmFsdWVDaGFuZ2VzID0ge30pIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIuZmlsdGVyKHJlbiA9PiAocmVuLmRlcCAmJiBBcnJheS5pc0FycmF5KHJlbi5kZXApICYmIHJlbi5kZXAuc29tZSgoZGVwcCkgPT4gKGRlcHAgaW4gdmFsdWVDaGFuZ2VzKSkpIHx8IChyZW4uZGVwID09PSB1bmRlZmluZWQpKS5mb3JFYWNoKHJlbiA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZW4uY2xlYW4pIHJlbi5jbGVhbih7IC4uLnRoaXMudmFsdWVzLCAuLi52YWx1ZUNoYW5nZXMgfSwgdGhpcy52YWx1ZXMpXHJcbiAgICAgICAgICAgIHJlbi5hY3Rpb24oeyAuLi50aGlzLnZhbHVlcywgLi4udmFsdWVDaGFuZ2VzIH0sIHRoaXMudmFsdWVzKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5ydW5CaW5kcyh7cm9vdDp0aGlzLnJvb3QsIHZhbHVlQ2hhbmdlcywgYWRkaXRpb25hbEhvc3RzOlt0aGlzLnJvb3RdLCBtZW1vaXplZEVsZW1lbnRzOltdIH0pO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGdldEJpbmRBY3Rpb24oZWxlbWVudCA6IEhUTUxFbGVtZW50LCB2YWx1ZUNoYW5nZXM6IG9iamVjdCkgOiBbc3RyaW5nLCAocmVwbGFjZSA6IE5vZGUgfCBOb2RlTGlzdCB8IE5vZGVbXSApPT4gdm9pZCBdIHwgbnVsbCB7XHJcbiAgICAgICAgaWYodGhpcy5pc0JpbmQoZWxlbWVudCkpe1xyXG4gICAgICAgICAgICBpZihlbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRBdHRyKSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2VsZW1lbnQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZEF0dHIpLCAocmVwbGFjZSk9PmVsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQocmVwbGFjZSBhcyBOb2RlLCBlbGVtZW50KV1cclxuICAgICAgICAgICAgfWVsc2UgaWYoZWxlbWVudC5sb2NhbE5hbWUgPT09ICdkLWJpbmQnKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RvJyksIChyZXBsYWNlKT0+ZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChyZXBsYWNlIGFzIE5vZGUsIGVsZW1lbnQpXVxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH1lbHNlIGlmKHRoaXMuaXNCaW5kSW4oZWxlbWVudCkpe1xyXG4gICAgICAgICAgICByZXR1cm4gW2VsZW1lbnQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZEluQXR0ciksIChyZXBsYWNlKT0+e1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IG5vZGUgb2YgcmVwbGFjZSBhcyBOb2RlTGlzdCkgZWxlbWVudC5hcHBlbmRDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgfV1cclxuICAgICAgICB9ZWxzZSBpZihEb2NPYmplY3QuaXNEb2JPYmplY3RFbGVtZW50KGVsZW1lbnQpKXtcclxuICAgICAgICAgICAgaWYoZWxlbWVudCA9PT0gdGhpcy5yb290ICl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWyd0aGlzJywgICAocmVwbGFjZSk9PntcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG5vZGUgb2YgcmVwbGFjZSBhcyBOb2RlTGlzdCkgZWxlbWVudC5hcHBlbmRDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgKGVsZW1lbnQgYXMgRG9jT2JqZWN0RWxlbWVudCkuX0RvY09iamVjdC5ydW5SZW5kZXIodmFsdWVDaGFuZ2VzKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHF1ZXJ5U2VsZWN0b3JBbGwgPSAoc2VsZWN0b3IgOiBzdHJpbmcpID0+IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKVxyXG4gICAgcnVuQmluZHMocGFyYW1zOiBEb2NPYmplY3RSdW5CaW5kT3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IHsgcm9vdCwgdmFsdWVDaGFuZ2VzLCBhZGRpdGlvbmFsSG9zdHMsIG1lbW9pemVkRWxlbWVudHMgfSA9IHRoaXMuZGVmYXVsdFJ1bkJpbmRPcHRpb25zKHBhcmFtcyk7XHJcbiAgICAgICAgKEFycmF5LmlzQXJyYXkocm9vdCkgPyByb290IDogW3Jvb3RdKVxyXG4gICAgICAgICAgICAuZmlsdGVyKHJ0ID0+IHJ0ICYmIHJ0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpXHJcbiAgICAgICAgICAgIC5mb3JFYWNoKChydCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgWy4uLihydC5xdWVyeVNlbGVjdG9yQWxsKGBbJHt0aGlzLmJpbmRBdHRyfV0sIFske3RoaXMuYmluZEluQXR0cn1dLCBkLWJpbmRbdG9dLCBbZG9jLW9iamVjdF1gKSksIC4uLmFkZGl0aW9uYWxIb3N0c11cclxuICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU2tpcCBpZiB0aGlzIG5vZGUgaGFzIGJlZW4gYm91bmQgZG93biB0aGUgcmVjdXJzaW9uIGN5Y2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1lbW9pemVkRWxlbWVudHMuc29tZShlID0+IChlbGVtZW50IGFzIEhUTUxFbGVtZW50KS5pc1NhbWVOb2RlKGUpKSkgcmV0dXJuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0FkZCB0byBtZW1vaXplZEVsZW1lbnRzIHRvIGJlIHNraXBwZWQgaW4gdGhlIGZ1dHVyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1vaXplZEVsZW1lbnRzLnB1c2goZWxlbWVudClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRJbnN0cnVjdGlvbnMgPSB0aGlzLmdldEJpbmRBY3Rpb24oZWxlbWVudCwgdmFsdWVDaGFuZ2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmluZEluc3RydWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9HZXQgVGhlIEJpbmQgTWV0aG9kLCBhbmQgdGhlIEZ1bmN0aW9uIHRvIGluc2VydCBIVE1MIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW2JpbmQsIGJpbmRBY3Rpb25dID0gYmluZEluc3RydWN0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQ2hlY2sgaWYgQmluZCBFeGlzdHMgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmluZCBpbiB0aGlzLmJpbmRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9HZXQgT3IgcmVnaXN0ZXIgQmluZCBUYWcncyBDb25maWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmZpbmRPclJlZ2lzdGVyQmluZChlbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSW5zZXJ0IEhUTUxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kQWN0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bkJpbmRzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3Q6IHRoaXMuZ2VuZXJhdGVCaW5kKCAgLy9XcmFwIEJpbmQgTWV0aG9kIHRvIHByZXBhcmUgYmluZCBmb3IgZG9jdW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbmQsICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9SdW4gQmluZCBNZXRob2RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0V4dHJhY3QgQmluZCBhbmQgVXNlIEphdmFTY3JpcHQncyBiaW5kIG1ldGhvZCB0byBzZXQgdGhpcyB0byBEb2NPYmplY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5iaW5kc1tiaW5kXS5iaW5kKHRoaXMuX3RoaXMpKShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZXMsIC8vUGFzcyBpbiB1cGRhdGVzIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcub3JpZ2luYWxBdHRyaWJ1dGVzLCAvL1Bhc3MgaW4gb3JpZ2luYWwgYXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcub3JpZ2luYWxDaGlsZHJlbiwgLy9QYXNzIGluIG9yaWdpbmFsIGNoaWxkcmVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlQ2hhbmdlcyAvL0NoYW5nZXMgdGhhdCB0cmlnZ2VyZWQgcmVuZGVyIChJbmNsdWRpbmcgYSBwYXJlbnQncyBEb2NPYmplY3QgdmFsdWUgY2hhbmdlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVDaGFuZ2VzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb2l6ZWRFbGVtZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiByb290O1xyXG4gICAgfVxyXG5cclxuICAgIHJ1bkNvbm5lY3Rpb25zKHZhbHVlQ2hhbmdlcyA6IHtba2V5IDogc3RyaW5nfHN5bWJvbF0gOiBhbnkgfSA9IHtbdHJ1ZSBhcyBhbnldOnRydWV9ICl7XHJcbiAgICAgICAgZm9yKGxldCBreSBpbiB2YWx1ZUNoYW5nZXMpe1xyXG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0aW9ucy5mb3JFYWNoKChjb25uZWN0ZWQpID0+IGNvbm5lY3RlZC52YWx1ZXNba3ldID0gdmFsdWVDaGFuZ2VzW2t5XSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNvbm5lY3QoLi4uZG9jT2JqZWN0cyA6IFtEb2NPYmplY3RdKXtcclxuICAgICAgICB0aGlzLl9jb25uZWN0aW9ucyA9IFsuLi50aGlzLl9jb25uZWN0aW9ucywgLi4uZG9jT2JqZWN0c11cclxuICAgICAgICB0aGlzLnJ1bkNvbm5lY3Rpb25zKHRoaXMudmFsdWVzKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG4iLCJcclxuXHJcbmV4cG9ydCBjb25zdCBST09UX0VSUk9SID0gJ1JPT1RfRVJST1InXHJcbmV4cG9ydCBjb25zdCBKUVVFUllfTk9UX0RFVEVDVEVEID0gJ0pRVUVSWV9OT1RfREVURUNURUQnXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcnVuRXJyb3IoZXJyb3IgOiBzdHJpbmcsIGZhaWw9ZmFsc2Upe1xyXG4gICAgaWYoZXJyb3IgaW4gRVJST1JTKXtcclxuICAgICAgICBpZihmYWlsKXtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0RvY09iamVjdDogJysgRVJST1JTW2Vycm9yXS5tZXNzYWdlKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihFUlJPUlNbZXJyb3JdLm1lc3NhZ2UpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBST09UX0VSUk9SIDoge1xyXG4gICAgICAgIG1lc3NhZ2U6IFwiUm9vdCBFbGVtZW50IE11c3QgYmUgYSB2YWxpZCBOb2RlLCBPciBqUXVlcnkgRWxlbWVudFwiXHJcbiAgICB9LFxyXG4gICAgSlFVRVJZX05PVF9ERVRFQ1RFRDoge1xyXG4gICAgICAgIG1lc3NhZ2UgOiBcIkpRdWVyeSBpcyBub3QgZGV0ZWN0ZWQuIFBsZWFzZSBsb2FkIEpRdWVyeSBiZWZvcmUgRG9jT2JqZWN0XCJcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBEb2NPYmplY3QsIERvY09iamVjdEVsZW1lbnQgfSBmcm9tIFwiLi9kb2NvYmplY3RcIjtcclxuaW1wb3J0IERvY0dlbiBmcm9tIFwiLi9kb2NnZW5cIjtcclxuaW1wb3J0IHtzZXRDdXJzb3JQb3MsIGdldEN1cnNvclBvc30gZnJvbSBcIi4vdXRpbHNcIlxyXG5cclxuY2xhc3MgQmluZCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7bW9kZTogXCJvcGVuXCJ9KTtcclxuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmQoZGl2KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4vKioqKioqKiBVVElMSVRZIE1FVEhPRFMgKioqKioqKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZpeElucHV0KHNlbGVjdG9yLCBhY3Rpb24pe1xyXG4gICAgbGV0IHBvcyA9IGdldEN1cnNvclBvcyhzZWxlY3RvcigpWzBdKVxyXG4gICAgYWN0aW9uKClcclxuICAgIHNldEN1cnNvclBvcyhzZWxlY3RvcigpWzBdLCBwb3MpXHJcbn1cclxuXHJcblxyXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdkLWJpbmQnLCBCaW5kKVxyXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdkb2Mtb2JqZWN0JywgRG9jT2JqZWN0RWxlbWVudClcclxuaWYod2luZG93LmpRdWVyeSl7XHJcbiAgICAoZnVuY3Rpb24oJCkge1xyXG4gICAgICAgICQuZm4uZXh0ZW5kKHtcclxuICAgICAgICAgICAgRG9jT2JqZWN0IDogZnVuY3Rpb24oIG9wdGlvbnMgPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzWzBdLl9Eb2NPYmplY3QgJiYgIW9wdGlvbnMgKSByZXR1cm4gdGhpc1swXS5fRG9jT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEb2NPYmplY3QodGhpcywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG5ldyBEb2NPYmplY3QodGhpcywgeyBpc0pRdWVyeTp0cnVlLCAuLi5vcHRpb25zIH0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1swXS5fRG9jT2JqZWN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pKGpRdWVyeSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvYmoocm9vdCA6IERvY09iamVjdEVsZW1lbnQgfCBKUXVlcnksIG9wdGlvbnMgOiBvYmplY3QpIDogRG9jT2JqZWN0IHtcclxuICAgIHJldHVybiBuZXcgRG9jT2JqZWN0KHJvb3QsIG9wdGlvbnMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuKCkgOiBEb2NHZW4ge1xyXG4gICAgcmV0dXJuIG5ldyBEb2NHZW4oKVxyXG59XHJcbiIsImludGVyZmFjZSBEb2N1bWVudCB7XHJcbiAgICBzZWxlY3Rpb246IHtcclxuICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxuLy8gQ3JlZGl0czogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjg5NzE1NS9nZXQtY3Vyc29yLXBvc2l0aW9uLWluLWNoYXJhY3RlcnMtd2l0aGluLWEtdGV4dC1pbnB1dC1maWVsZFxyXG4gZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnNvclBvcyhlbGVtZW50IDogSFRNTElucHV0RWxlbWVudCkgOiBudW1iZXIge1xyXG4gICAgLy8gaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xyXG4gICAgLy8gICAgIGVsZW1lbnQuZm9jdXMoKTtcclxuICAgIC8vICAgICByZXR1cm4gIGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgLWVsZW1lbnQudmFsdWUubGVuZ3RoKTtcclxuICAgIC8vIH1cclxuICAgICAgICByZXR1cm4gZWxlbWVudC5zZWxlY3Rpb25EaXJlY3Rpb24gPT0gJ2JhY2t3YXJkJyA/IGVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgOiBlbGVtZW50LnNlbGVjdGlvbkVuZDtcclxufVxyXG5cclxuLy8gQ3JlZGl0czogaHR0cDovL2Jsb2cudmlzaGFsb24ubmV0L2luZGV4LnBocC9qYXZhc2NyaXB0LWdldHRpbmctYW5kLXNldHRpbmctY2FyZXQtcG9zaXRpb24taW4tdGV4dGFyZWEvXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJzb3JQb3MoZWxlbWVudCA6IEhUTUxJbnB1dEVsZW1lbnQsIHBvcyA6IG51bWJlcikgOiB2b2lkIHtcclxuICAgIC8vIE1vZGVybiBicm93c2Vyc1xyXG4gICAgaWYgKGVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UpIHtcclxuICAgIGVsZW1lbnQuZm9jdXMoKTtcclxuICAgIGVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UocG9zLCBwb3MpO1xyXG4gICAgXHJcbiAgICAvLyBJRTggYW5kIGJlbG93XHJcbiAgICB9IGVsc2UgaWYgKChlbGVtZW50IGFzIGFueSkuY3JlYXRlVGV4dFJhbmdlKSB7XHJcbiAgICAgIHZhciByYW5nZSA9IChlbGVtZW50IGFzIGFueSkuY3JlYXRlVGV4dFJhbmdlKCk7XHJcbiAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpO1xyXG4gICAgICByYW5nZS5tb3ZlRW5kKCdjaGFyYWN0ZXInLCBwb3MpO1xyXG4gICAgICByYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHBvcyk7XHJcbiAgICAgIHJhbmdlLnNlbGVjdCgpO1xyXG4gICAgfVxyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOTQpO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwib2JqIiwidGhpcyIsIlByb3h5IiwiZ2V0IiwidGFyZ2V0IiwicHJvcCIsIkdlbiIsImlubmVyIiwiYXR0cnMiLCJiaW5kcyIsImJvdW5kIiwidmFsdWVzIiwiRG9jT2JqZWN0IiwidG9Ob2RlQXJyYXkiLCJnIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImtleSIsInNrZXkiLCJzdHlsZSIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwic2V0QXR0cmlidXRlIiwiZm9yRWFjaCIsImluZSIsInBhcmVudEVsZW1lbnQiLCJub2RlTmFtZSIsImFwcGVuZENoaWxkIiwiY2xvbmVOb2RlIiwiRG9jT2JqZWN0RWxlbWVudCIsIkhUTUxFbGVtZW50Iiwic3VwZXIiLCJyb290Iiwib3B0aW9ucyIsIl90aGlzIiwicXVlcnlTZWxlY3RvckFsbCIsInNlbGVjdG9yIiwiZWxlbWVudHMiLCJyZW5kZXIiLCJiaW5kQXR0ciIsImJpbmRJbkF0dHIiLCJpc0pRdWVyeSIsImNvbm5lY3Rpb25zIiwicmVtb3ZlT25sb2FkIiwiZGVmYXVsdFBhcmFtcyIsInJvb3RFbGVtZW50IiwiUk9PVF9FUlJPUiIsIl9jb25uZWN0aW9ucyIsIndpbmRvdyIsImpRdWVyeSIsIl9pc0pRdWVyeSIsIl9xdWVyeVNlbGVjdCIsInByb3BzIiwiJCIsImZpbmQiLCJKUVVFUllfTk9UX0RFVEVDVEVEIiwiX0RvY09iamVjdCIsImV4dHJhY3RBdHRyaWJ1dGVzIiwicXVlcnkiLCJfIiwiZXhlYyIsInNldCIsInZhbHVlIiwicmVjZWl2ZXIiLCJlbnRyaWVzIiwiZSIsIl92YWx1ZXMiLCJydW5SZW5kZXIiLCJydW5Db25uZWN0aW9ucyIsIm9uTG9hZCIsIm9ubG9hZCIsInN0YXRpYyIsImFueSIsInBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInRvU3RyaW5nIiwiYm9keSIsImNoaWxkTm9kZXMiLCJOb2RlTGlzdCIsInByb3RvdHlwZSIsImlzUHJvdG90eXBlT2YiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJOb2RlIiwibWFwIiwiRG9jdW1lbnQiLCJhdHRyaWJ1dGVzIiwicmVkdWNlIiwiYSIsImMiLCJyZXBsYWNlIiwidG9VcHBlckNhc2UiLCJkZWZhdWx0UnVuQmluZE9wdGlvbnMiLCJ2YWx1ZUNoYW5nZXMiLCJhZGRpdGlvbmFsSG9zdHMiLCJtZW1vaXplZEVsZW1lbnRzIiwiRXJyb3IiLCJpc0JpbmRJbiIsImdldEF0dHJpYnV0ZSIsImlzQmluZCIsImxvY2FsTmFtZSIsImZpbmRPclJlZ2lzdGVyQmluZCIsIkRPTWVsZW1lbnQiLCJ1bmRlZmluZWQiLCJfRG9jT2JqZWN0Q29uZmlnIiwib3JpZ2luYWxDaGlsZHJlbiIsImlubmVySFRNTCIsIm9yaWdpbmFsQ2hpbGRyZW5IVE1MIiwib3JpZ2luYWxBdHRyaWJ1dGVzIiwiZ2VuZXJhdGVCaW5kIiwiYmluZCIsImNvbmZpZyIsIm5vZGVBcnJheSIsImZpcnN0RWxlbWVudCIsImVsIiwiYXR0QSIsImluY2x1ZGVzIiwicmVuIiwiZGVwIiwic29tZSIsImRlcHAiLCJjbGVhbiIsImFjdGlvbiIsInJ1bkJpbmRzIiwiZ2V0QmluZEFjdGlvbiIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJub2RlIiwiaXNEb2JPYmplY3RFbGVtZW50IiwicGFyYW1zIiwicnQiLCJpc1NhbWVOb2RlIiwicHVzaCIsImJpbmRJbnN0cnVjdGlvbnMiLCJiaW5kQWN0aW9uIiwia3kiLCJjb25uZWN0ZWQiLCJjb25uZWN0IiwiZG9jT2JqZWN0cyIsIkRPTVBhcnNlciIsImVycm9yIiwiZmFpbCIsIkVSUk9SUyIsIm1lc3NhZ2UiLCJjb25zb2xlIiwiQmluZCIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJkaXYiLCJkaXNwbGF5Iiwic2hhZG93Um9vdCIsImFwcGVuZCIsInBvcyIsImdldEN1cnNvclBvcyIsInNldEN1cnNvclBvcyIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiZm4iLCJleHRlbmQiLCJlYWNoIiwic2VsZWN0aW9uRGlyZWN0aW9uIiwic2VsZWN0aW9uU3RhcnQiLCJzZWxlY3Rpb25FbmQiLCJzZXRTZWxlY3Rpb25SYW5nZSIsImZvY3VzIiwiY3JlYXRlVGV4dFJhbmdlIiwicmFuZ2UiLCJjb2xsYXBzZSIsIm1vdmVFbmQiLCJtb3ZlU3RhcnQiLCJzZWxlY3QiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==